/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xduce=e():t.xduce=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/index.js")}({"./src/index.js":
/*!**********************!*\
        !*** ./src/index.js ***!
        \**********************/
/*! exports provided: protocols, isImplemented, iterator, isIterable, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce, toFunction, toReducer, toTransducer, isArray, isFunction, isGeneratorFunction, isNumber, isObject, isString */
function(t,e,n){"use strict";n.r(e);var r=n(
/*! modules/protocol */
"./src/modules/protocol.js");n.d(e,"protocols",(function(){return r.protocols})),n.d(e,"isImplemented",(function(){return r.isImplemented}));var o=n(
/*! modules/iteration */
"./src/modules/iteration.js");n.d(e,"iterator",(function(){return o.iterator})),n.d(e,"isIterable",(function(){return o.isIterable}));var u=n(
/*! modules/reduction */
"./src/modules/reduction.js");n.d(e,"complete",(function(){return u.complete})),n.d(e,"uncomplete",(function(){return u.uncomplete})),n.d(e,"isCompleted",(function(){return u.isCompleted})),n.d(e,"ensureCompleted",(function(){return u.ensureCompleted})),n.d(e,"ensureUncompleted",(function(){return u.ensureUncompleted})),n.d(e,"reduce",(function(){return u.reduce})),n.d(e,"toFunction",(function(){return u.toFunction})),n.d(e,"toReducer",(function(){return u.toReducer})),n.d(e,"toTransducer",(function(){return u.toTransducer}));var c=n(
/*! modules/utils */
"./src/modules/utils.js");n.d(e,"isArray",(function(){return c.isArray})),n.d(e,"isFunction",(function(){return c.isFunction})),n.d(e,"isGeneratorFunction",(function(){return c.isGeneratorFunction})),n.d(e,"isNumber",(function(){return c.isNumber})),n.d(e,"isObject",(function(){return c.isObject})),n.d(e,"isString",(function(){return c.isString}))},"./src/modules/iteration.js":
/*!**********************************!*\
        !*** ./src/modules/iteration.js ***!
        \**********************************/
/*! exports provided: iterator, isIterable */
function(t,e,n){"use strict";n.r(e),n.d(e,"iterator",(function(){return u})),n.d(e,"isIterable",(function(){return c}));var r=n(
/*! modules/protocol */
"./src/modules/protocol.js"),o=n(
/*! modules/utils */
"./src/modules/utils.js");function u(t,e=null){switch(!0){case Object(o.isFunction)(t[Symbol.iterator]):case Object(o.isGeneratorFunction)(t[Symbol.iterator]):return t[Symbol.iterator]();case Object(o.isFunction)(t):return n=t,function*(){let t,e=0;for(;t=n(e++,t),void 0!==t;)yield t}();case Object(o.isObject)(t):return function(t,e){return function*(){const n="function"==typeof e?Object.keys(t).sort(e):Object.keys(t);let r=0;for(;r<n.length;){const e=n[r++];yield{[e]:t[e]}}}()}(t,e);default:return null}var n}function c(t){return Object(r.isImplemented)(t,"iterator")||Object(o.isObject)(t)}},"./src/modules/protocol.js":
/*!*********************************!*\
        !*** ./src/modules/protocol.js ***!
        \*********************************/
/*! exports provided: protocols, isImplemented */
function(t,e,n){"use strict";n.r(e),n.d(e,"protocols",(function(){return o})),n.d(e,"isImplemented",(function(){return u}));var r=n(
/*! modules/utils */
"./src/modules/utils.js");const o=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function u(t,e){if(null==t)return!1;switch(e){case"iterator":return Object(r.isFunction)(t[Symbol.iterator])||Object(r.isGeneratorFunction)(t[Symbol.iterator]);case"asyncIterator":return Object(r.isGeneratorFunction)(t[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(t).includes(o[e]);default:return Object(r.isFunction)(t[o[e]])}}},"./src/modules/reduction.js":
/*!**********************************!*\
        !*** ./src/modules/reduction.js ***!
        \**********************************/
/*! exports provided: init, step, result, toReducer, ARRAY_REDUCER, OBJECT_REDUCER, STRING_REDUCER, toTransducer, toFunction, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce */
function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return c})),n.d(e,"step",(function(){return i})),n.d(e,"result",(function(){return s})),n.d(e,"toReducer",(function(){return l})),n.d(e,"ARRAY_REDUCER",(function(){return f})),n.d(e,"OBJECT_REDUCER",(function(){return d})),n.d(e,"STRING_REDUCER",(function(){return a})),n.d(e,"toTransducer",(function(){return p})),n.d(e,"toFunction",(function(){return b})),n.d(e,"complete",(function(){return j})),n.d(e,"uncomplete",(function(){return O})),n.d(e,"isCompleted",(function(){return m})),n.d(e,"ensureCompleted",(function(){return y})),n.d(e,"ensureUncompleted",(function(){return v})),n.d(e,"reduce",(function(){return S}));var r=n(
/*! modules/protocol */
"./src/modules/protocol.js"),o=n(
/*! modules/utils */
"./src/modules/utils.js"),u=n(
/*! modules/iteration */
"./src/modules/iteration.js");function c(t){switch(!0){case Object(r.isImplemented)(t,"init"):return t[r.protocols.init];case Object(o.isString)(t):return()=>"";case Object(o.isArray)(t):return()=>[];case Object(o.isObject)(t):return()=>({});case Object(o.isFunction)(t):return()=>{throw Error("init not available")};default:return null}}function i(t){switch(!0){case Object(r.isImplemented)(t,"step"):return t[r.protocols.step];case Object(o.isString)(t):return(t,e)=>t+(Object(o.isObject)(e)?e[Object.keys(e)[0]]:e);case Object(o.isArray)(t):return(t,e)=>(t.push(e),t);case Object(o.isObject)(t):return(t,e)=>{let n=e;Object(o.isObject)(e)||(n={[Object.keys(t).reduce((t,e)=>Math.max(t,e),-1)+1]:e});const r=Object.keys(n)[0];return t[r]=n[r],t};case Object(o.isFunction)(t):return(e,n)=>t(e,n);default:return null}}function s(t){switch(!0){case Object(r.isImplemented)(t,"result"):return t[r.protocols.result];case Object(o.isString)(t):case Object(o.isArray)(t):case Object(o.isObject)(t):case Object(o.isFunction)(t):return t=>t;default:return null}}function l(t){return Object.freeze({[r.protocols.init]:c(t),[r.protocols.step]:i(t),[r.protocols.result]:s(t)})}const f=l([]),d=l({}),a=l("");function p(t,e){return{[r.protocols.init]:()=>e[r.protocols.init](),[r.protocols.step]:t,[r.protocols.result]:t=>e[r.protocols.result](t)}}function b(t,e){const n=t("function"==typeof e?l(e):e);return n[r.protocols.step].bind(n)}function j(t){return{[r.protocols.reduced]:!0,[r.protocols.value]:t}}function O(t){return null==t?void 0:t[r.protocols.value]}function m(t){return!!(null==t?void 0:t[r.protocols.reduced])}function y(t){return m(t)?t:j(t)}function v(t){return m(t)?O(t):t}function S(t,e,n){if(null==t)return null;const o=Object(u.iterator)(t);if(!o)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let c=n,i=o.next();for(;!i.done;){if(c=e[r.protocols.step](c,i.value),m(c)){c=O(c);break}i=o.next()}return e[r.protocols.result](c)}},"./src/modules/utils.js":
/*!******************************!*\
        !*** ./src/modules/utils.js ***!
        \******************************/
/*! exports provided: isFunction, isGeneratorFunction, isObject, isNumber, isString, isArray */
function(t,e,n){"use strict";n.r(e),n.d(e,"isFunction",(function(){return o})),n.d(e,"isGeneratorFunction",(function(){return u})),n.d(e,"isObject",(function(){return c})),n.d(e,"isNumber",(function(){return i})),n.d(e,"isString",(function(){return s})),n.d(e,"isArray",(function(){return l}));const r=Object.prototype.toString;function o(t){return"[object Function]"===r.call(t)}function u(t){return"[object GeneratorFunction]"===r.call(t)}function c(t){if("[object Object]"!==r.call(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n===Object}function i(t){return"[object Number]"===r.call(t)&&isFinite(t)}function s(t){return"[object String]"===r.call(t)}const l=Array.isArray}})},t.exports=r()},function(t,e,n){"use strict";n.r(e),n.d(e,"kv",(function(){return c})),n.d(e,"key",(function(){return i})),n.d(e,"value",(function(){return s})),n.d(e,"complement",(function(){return l})),n.d(e,"transduce",(function(){return f})),n.d(e,"sequence",(function(){return j})),n.d(e,"into",(function(){return O})),n.d(e,"asArray",(function(){return d})),n.d(e,"asObject",(function(){return a})),n.d(e,"asString",(function(){return p})),n.d(e,"asIterator",(function(){return b})),n.d(e,"compose",(function(){return m})),n.d(e,"identity",(function(){return y})),n.d(e,"flatten",(function(){return v})),n.d(e,"repeat",(function(){return S})),n.d(e,"drop",(function(){return g})),n.d(e,"dropWhile",(function(){return h})),n.d(e,"filter",(function(){return x})),n.d(e,"reject",(function(){return F})),n.d(e,"map",(function(){return T})),n.d(e,"flatMap",(function(){return R})),n.d(e,"take",(function(){return C})),n.d(e,"takeWhile",(function(){return I})),n.d(e,"takeNth",(function(){return k}));var r=n(0);function o(t,e){return Object(r.isNumber)(t)?[null,t]:[t,e]}function u(t,e){return Object(r.isFunction)(t)?[null,t]:[t,e]}function c(t){const e=Object.keys(t)[0];return{k:e,v:t[e]}}function i(t){return c(t).k}function s(t){return c(t).v}function l(t){return(...e)=>!t(...e)}function f(t,e,n,o){const u=Object(r.isFunction)(n)?Object(r.toReducer)(n):n,c=null!=o?o:u[r.protocols.init](),i=e?e(u):u;return Object(r.reduce)(t,i,c)}function d(t,e){return f(t,e,Object(r.toReducer)([]))}function a(t,e){return f(t,e,Object(r.toReducer)({}))}function p(t,e){return f(t,e,Object(r.toReducer)(""))}function b(t,e){return e?function(t,e){const n={[r.protocols.step]:(t,e)=>(t.items.unshift(e),t),[r.protocols.result]:t=>t},o=Object(r.iterator)(t),u=e(n);let c=!1;const i=[];function s(){const t=i.length;for(;i.length===t;){const t=o.next();if(t.done||c){u[r.protocols.result](l);break}c=Object(r.isCompleted)(u[r.protocols.step](l,t.value))}}const l={items:i,next:function(){return 0===i.length&&s(),0===i.length?{done:!0}:{value:i.pop(),done:!1}},step:s,[Symbol.iterator]:function(){return l}};return l}(t,e):Object(r.iterator)(t)}function j(t,e){switch(!0){case Object(r.isArray)(t):return d(t,e);case Object(r.isObject)(t):return a(t,e);case Object(r.isString)(t):return p(t,e);case Object(r.isImplemented)(t,"step"):return f(t,e,t);case Object(r.isImplemented)(t,"iterator"):return b(t,e);default:throw Error(`Cannot sequence collection: ${t}`)}}function O(t,e,n){switch(!0){case Object(r.isArray)(t):return f(e,n,Object(r.toReducer)([]),t);case Object(r.isObject)(t):return f(e,n,Object(r.toReducer)({}),t);case Object(r.isString)(t):return f(e,n,Object(r.toReducer)(""),t);case Object(r.isImplemented)(t,"step"):return f(e,n,t,t);default:throw Error(`Cannot reduce collection into ${t}: ${e}`)}}function m(...t){const e=t.reverse();return t=>e.reduce((t,e)=>e(t),t)}function y(t){return t?j(t,y()):t=>Object(r.toTransducer)((e,n)=>t[r.protocols.step](e,n),t)}function v(t){return t?j(t,v()):t=>Object(r.toTransducer)((e,n)=>{const o=Object(r.toTransducer)((e,n)=>{const o=t[r.protocols.step](e,n);return Object(r.isCompleted)(o)?Object(r.complete)(o):o},t);return Object(r.isIterable)(n)?Object(r.reduce)(n,o,e):o[r.protocols.step](e,n)},t)}function S(t,e){const[n,u]=o(t,e);return n?j(n,S(u)):t=>Object(r.toTransducer)((e,n)=>{let o=e;for(let e=0;e<u&&(o=t[r.protocols.step](o,n),!Object(r.isCompleted)(o));e++);return o},t)}function g(t,e){const[n,u]=o(t,e);return n?j(n,g(u)):t=>{let e=0;return Object(r.toTransducer)((n,o)=>e++<u?n:t[r.protocols.step](n,o),t)}}function h(t,e){const[n,o]=u(t,e);return n?j(n,h(o)):t=>{let e=!0;return Object(r.toTransducer)((n,u)=>{if(e){if(o(u))return n;e=!1}return t[r.protocols.step](n,u)},t)}}function x(t,e){const[n,o]=u(t,e);return n?j(n,x(o)):t=>Object(r.toTransducer)((e,n)=>o(n)?t[r.protocols.step](e,n):e,t)}function F(t,e){const[n,r]=u(t,e);return x(n,l(r))}function T(t,e){const[n,o]=u(t,e);return n?j(n,T(o)):t=>Object(r.toTransducer)((e,n)=>t[r.protocols.step](e,o(n)),t)}function R(t,e){const[n,r]=u(t,e);return n?j(n,m(T(r),v())):m(T(r),v())}function C(t,e){const[n,u]=o(t,e);return n?j(n,C(u)):t=>{let e=0;return Object(r.toTransducer)((n,o)=>{let c=n;return e<u&&(c=t[r.protocols.step](n,o),e===u-1&&(c=Object(r.ensureCompleted)(c))),e++,c},t)}}function I(t,e){const[n,o]=u(t,e);return n?j(n,I(o)):t=>Object(r.toTransducer)((e,n)=>o(n)?t[r.protocols.step](e,n):Object(r.ensureCompleted)(e),t)}function k(t,e){const[n,u]=o(t,e);return n?j(n,k(u)):t=>{let e=-1;return Object(r.toTransducer)((n,o)=>++e%u==0?t[r.protocols.step](n,o):n,t)}}}])}));