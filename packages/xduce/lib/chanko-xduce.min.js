/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xduce=t():e.xduce=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n=Object.prototype.toString;function u(e){return"[object Function]"===n.call(e)}function o(e){return"[object GeneratorFunction]"===n.call(e)}function c(e){if("[object Object]"!==n.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r===Object}function i(e){return"[object String]"===n.call(e)}const l=Array.isArray,f=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function a(e,t){if(null==e)return!1;switch(t){case"iterator":return u(e[Symbol.iterator])||o(e[Symbol.iterator]);case"asyncIterator":return o(e[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(e).includes(f[t]);default:return u(e[f[t]])}}function s(e){const t=Object.keys(e)[0];return{k:t,v:e[t]}}function d(e,t=null){switch(!0){case u(e[Symbol.iterator]):case o(e[Symbol.iterator]):return e[Symbol.iterator]();case u(e):return r=e,function*(){let e,t=0;for(;e=r(t++,e),void 0!==e;)yield e}();case c(e):return function(e,t){return function*(){const r="function"==typeof t?Object.keys(e).sort(t):Object.keys(e);let n=0;for(;n<r.length;){const t=r[n++];yield{[t]:e[t]}}}()}(e,t);default:return null}var r}function p(e){switch(!0){case a(e,"init"):return e[f.init];case i(e):return()=>"";case l(e):return()=>[];case c(e):return()=>({});case u(e):return()=>{throw Error("init not available")};default:return null}}function b(e){switch(!0){case a(e,"step"):return e[f.step];case i(e):return(e,t)=>e+(c(t)?s(t).v:t);case l(e):return(e,t)=>(e.push(t),e);case c(e):return(e,t)=>{let r=t;if(!c(t)){r={[Object.keys(e).reduce((e,t)=>Math.max(e,t))+1]:t}}const{k:n,v:u}=s(r);return e[n]=u,e};case u(e):return(t,r)=>e(t,r);default:return null}}function y(e){switch(!0){case a(e,"result"):return e[f.result];case i(e):case l(e):case c(e):case u(e):return e=>e;default:return null}}function m(e){return Object.freeze({[f.init]:p(e),[f.step]:b(e),[f.result]:y(e)})}m([]),m({}),m("");function v(e,t){const r=e("function"==typeof t?m(t):t);return r[f.step].bind(r)}function j(e){return{[f.reduced]:!0,[f.value]:e}}function O(e){return null==e?void 0:e[f.value]}function S(e){return!!(null==e?void 0:e[f.reduced])}function x(e){return S(e)?e:j(e)}function h(e){return S(e)?O(e):e}function g(e,t,r){if(null==e)return null;const n=d(e);if(!n)throw Error(`Cannot reduce an instance of ${e.constructor.name}`);let u=r,o=n.next();for(;!o.done;){if(u=t[f.step](u,o.value),S(u)){u=O(u);break}o=n.next()}return t[f.result](u)}r.d(t,"protocols",(function(){return f})),r.d(t,"iterator",(function(){return d})),r.d(t,"property",(function(){return s})),r.d(t,"complete",(function(){return j})),r.d(t,"uncomplete",(function(){return O})),r.d(t,"isCompleted",(function(){return S})),r.d(t,"ensureCompleted",(function(){return x})),r.d(t,"ensureUncompleted",(function(){return h})),r.d(t,"reduce",(function(){return g})),r.d(t,"toFunction",(function(){return v})),r.d(t,"toReducer",(function(){return m}))}])}));