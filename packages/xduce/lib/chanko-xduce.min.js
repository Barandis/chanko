/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xduce=e():t.xduce=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)n.d(r,u,function(e){return t[e]}.bind(null,u));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const r=Object.prototype.toString;function u(t){return"[object Function]"===r.call(t)}function o(t){return"[object GeneratorFunction]"===r.call(t)}function c(t){if("[object Object]"!==r.call(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n===Object}function i(t){return"[object String]"===r.call(t)}const s=Array.isArray,l=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function f(t,e){if(null==t)return!1;switch(e){case"iterator":return u(t[Symbol.iterator])||o(t[Symbol.iterator]);case"asyncIterator":return o(t[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(t).includes(l[e]);default:return u(t[l[e]])}}function a(t){const e=Object.keys(t)[0];return{k:e,v:t[e]}}function d(t){return a(t).k}function p(t){return a(t).v}function b(t,e=null){switch(!0){case u(t[Symbol.iterator]):case o(t[Symbol.iterator]):return t[Symbol.iterator]();case u(t):return n=t,function*(){let t,e=0;for(;t=n(e++,t),void 0!==t;)yield t}();case c(t):return function(t,e){return function*(){const n="function"==typeof e?Object.keys(t).sort(e):Object.keys(t);let r=0;for(;r<n.length;){const e=n[r++];yield{[e]:t[e]}}}()}(t,e);default:return null}var n}function y(t){switch(!0){case f(t,"init"):return t[l.init];case i(t):return()=>"";case s(t):return()=>[];case c(t):return()=>({});case u(t):return()=>{throw Error("init not available")};default:return null}}function v(t){switch(!0){case f(t,"step"):return t[l.step];case i(t):return(t,e)=>t+(c(e)?a(e).v:e);case s(t):return(t,e)=>(t.push(e),t);case c(t):return(t,e)=>{let n=e;if(!c(e)){n={[Object.keys(t).reduce((t,e)=>Math.max(t,e),-1)+1]:e}}const{k:r,v:u}=a(n);return t[r]=u,t};case u(t):return(e,n)=>t(e,n);default:return null}}function m(t){switch(!0){case f(t,"result"):return t[l.result];case i(t):case s(t):case c(t):case u(t):return t=>t;default:return null}}function j(t){return Object.freeze({[l.init]:y(t),[l.step]:v(t),[l.result]:m(t)})}const O=j([]),h=j({}),S=j("");function g(t,e){const n=t("function"==typeof e?j(e):e);return n[l.step].bind(n)}function x(t){return{[l.reduced]:!0,[l.value]:t}}function w(t){return null==t?void 0:t[l.value]}function k(t){return!!(null==t?void 0:t[l.reduced])}function P(t){return k(t)?t:x(t)}function _(t){return k(t)?w(t):t}function C(t,e,n){if(null==t)return null;const r=b(t);if(!r)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=n,o=r.next();for(;!o.done;){if(u=e[l.step](u,o.value),k(u)){u=w(u);break}o=r.next()}return e[l.result](u)}function M(t,e,n,r){const o=u(n)?j(n):n,c=null!=r?r:o[l.init]();return C(t,e?e(o):o,c)}function E(t,e){return M(t,e,O)}function $(t,e){return M(t,e,h)}function A(t,e){return M(t,e,S)}function F(t,e){return e?function(t,e){const n={[l.step]:(t,e)=>(t.items.unshift(e),t),[l.result]:t=>t},r=b(t),u=e(n);let o=!1;const c=[];function i(){const t=c.length;for(;c.length===t;){const t=r.next();if(t.done||o){u[l.result](s);break}o=k(u[l.step](s,t.value))}}const s={items:c,next:function(){return 0===c.length&&i(),0===c.length?{done:!0}:{value:c.pop(),done:!1}},step:i,[Symbol.iterator]:function(){return s}};return s}(t,e):b(t)}function I(t,e){switch(!0){case s(t):return E(t,e);case c(t):return $(t,e);case i(t):return A(t,e);case f(t,"step"):return M(t,e,t);case f(t,"iterator"):return F(t,e);default:throw Error(`Cannot sequence collection: ${t}`)}}function q(t,e,n){switch(!0){case s(t):return M(e,n,O,t);case c(t):return M(e,n,h,t);case i(t):return M(e,n,S,t);case f(t,"step"):return M(e,n,t,t);default:throw Error(`Cannot reduce collection into ${t}: ${e}`)}}function T(...t){const e=t.reverse();return t=>e.reduce((t,e)=>e(t),t)}n.d(e,"protocols",(function(){return l})),n.d(e,"iterator",(function(){return b})),n.d(e,"kv",(function(){return a})),n.d(e,"key",(function(){return d})),n.d(e,"value",(function(){return p})),n.d(e,"complete",(function(){return x})),n.d(e,"uncomplete",(function(){return w})),n.d(e,"isCompleted",(function(){return k})),n.d(e,"ensureCompleted",(function(){return P})),n.d(e,"ensureUncompleted",(function(){return _})),n.d(e,"reduce",(function(){return C})),n.d(e,"toFunction",(function(){return g})),n.d(e,"toReducer",(function(){return j})),n.d(e,"transduce",(function(){return M})),n.d(e,"sequence",(function(){return I})),n.d(e,"into",(function(){return q})),n.d(e,"asArray",(function(){return E})),n.d(e,"asObject",(function(){return $})),n.d(e,"asString",(function(){return A})),n.d(e,"asIterator",(function(){return F})),n.d(e,"compose",(function(){return T}))}])}));