/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.xduce=n():t.xduce=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){var r;r=function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s="./src/index.js")}({"./src/index.js":
/*!**********************!*\
        !*** ./src/index.js ***!
        \**********************/
/*! exports provided: protocols, isImplemented, iterator, isIterable, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce, toFunction, toReducer, toTransducer, isArray, isFunction, isGeneratorFunction, isNumber, isObject, isString */
function(t,n,e){"use strict";e.r(n);var r=e(
/*! modules/protocol */
"./src/modules/protocol.js");e.d(n,"protocols",(function(){return r.protocols})),e.d(n,"isImplemented",(function(){return r.isImplemented}));var o=e(
/*! modules/iteration */
"./src/modules/iteration.js");e.d(n,"iterator",(function(){return o.iterator})),e.d(n,"isIterable",(function(){return o.isIterable}));var c=e(
/*! modules/reduction */
"./src/modules/reduction.js");e.d(n,"complete",(function(){return c.complete})),e.d(n,"uncomplete",(function(){return c.uncomplete})),e.d(n,"isCompleted",(function(){return c.isCompleted})),e.d(n,"ensureCompleted",(function(){return c.ensureCompleted})),e.d(n,"ensureUncompleted",(function(){return c.ensureUncompleted})),e.d(n,"reduce",(function(){return c.reduce})),e.d(n,"toFunction",(function(){return c.toFunction})),e.d(n,"toReducer",(function(){return c.toReducer})),e.d(n,"toTransducer",(function(){return c.toTransducer}));var u=e(
/*! modules/utils */
"./src/modules/utils.js");e.d(n,"isArray",(function(){return u.isArray})),e.d(n,"isFunction",(function(){return u.isFunction})),e.d(n,"isGeneratorFunction",(function(){return u.isGeneratorFunction})),e.d(n,"isNumber",(function(){return u.isNumber})),e.d(n,"isObject",(function(){return u.isObject})),e.d(n,"isString",(function(){return u.isString}))},"./src/modules/iteration.js":
/*!**********************************!*\
        !*** ./src/modules/iteration.js ***!
        \**********************************/
/*! exports provided: iterator, isIterable */
function(t,n,e){"use strict";e.r(n),e.d(n,"iterator",(function(){return c})),e.d(n,"isIterable",(function(){return u}));var r=e(
/*! modules/protocol */
"./src/modules/protocol.js"),o=e(
/*! modules/utils */
"./src/modules/utils.js");function c(t){switch(!0){case Object(o.isFunction)(t[Symbol.iterator]):case Object(o.isGeneratorFunction)(t[Symbol.iterator]):return t[Symbol.iterator]();case Object(o.isFunction)(t):return e=t,function*(){let t,n=0;for(;t=e(n++,t),void 0!==t;)yield t}();case Object(o.isObject)(t):return n=t,function*(){const t=Object.keys(n);let e=0;for(;e<t.length;){const r=t[e++];yield{[r]:n[r]}}}();default:return null}var n,e}function u(t){return Object(r.isImplemented)(t,"iterator")||Object(o.isObject)(t)}},"./src/modules/protocol.js":
/*!*********************************!*\
        !*** ./src/modules/protocol.js ***!
        \*********************************/
/*! exports provided: protocols, isImplemented */
function(t,n,e){"use strict";e.r(n),e.d(n,"protocols",(function(){return o})),e.d(n,"isImplemented",(function(){return c}));var r=e(
/*! modules/utils */
"./src/modules/utils.js");const o=Object.create(null,{init:{value:Symbol.for("reducer/init")},step:{value:Symbol.for("reducer/step")},final:{value:Symbol.for("reducer/final")},completed:{value:Symbol.for("reducer/completed")},value:{value:Symbol.for("reducer/value")}});function c(t,n){if(null==t)return!1;switch(n){case"iterator":return Object(r.isFunction)(t[Symbol.iterator])||Object(r.isGeneratorFunction)(t[Symbol.iterator]);case"asyncIterator":return Object(r.isGeneratorFunction)(t[Symbol.asyncIterator]);case"completed":case"value":return Object.getOwnPropertySymbols(t).includes(o[n]);default:return Object(r.isFunction)(t[o[n]])}}},"./src/modules/reduction.js":
/*!**********************************!*\
        !*** ./src/modules/reduction.js ***!
        \**********************************/
/*! exports provided: init, step, final, toReducer, ARRAY_REDUCER, OBJECT_REDUCER, STRING_REDUCER, toTransducer, toFunction, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce */
function(t,n,e){"use strict";e.r(n),e.d(n,"init",(function(){return u})),e.d(n,"step",(function(){return i})),e.d(n,"final",(function(){return s})),e.d(n,"toReducer",(function(){return l})),e.d(n,"ARRAY_REDUCER",(function(){return f})),e.d(n,"OBJECT_REDUCER",(function(){return d})),e.d(n,"STRING_REDUCER",(function(){return a})),e.d(n,"toTransducer",(function(){return p})),e.d(n,"toFunction",(function(){return b})),e.d(n,"complete",(function(){return j})),e.d(n,"uncomplete",(function(){return O})),e.d(n,"isCompleted",(function(){return m})),e.d(n,"ensureCompleted",(function(){return y})),e.d(n,"ensureUncompleted",(function(){return v})),e.d(n,"reduce",(function(){return S}));var r=e(
/*! modules/protocol */
"./src/modules/protocol.js"),o=e(
/*! modules/utils */
"./src/modules/utils.js"),c=e(
/*! modules/iteration */
"./src/modules/iteration.js");function u(t){switch(!0){case Object(r.isImplemented)(t,"init"):return t[r.protocols.init];case Object(o.isString)(t):return()=>"";case Object(o.isArray)(t):return()=>[];case Object(o.isObject)(t):return()=>({});case Object(o.isFunction)(t):return()=>{throw Error("init not available")};default:return null}}function i(t){switch(!0){case Object(r.isImplemented)(t,"step"):return t[r.protocols.step];case Object(o.isString)(t):return(t,n)=>t+(Object(o.isObject)(n)?n[Object.keys(n)[0]]:n);case Object(o.isArray)(t):return(t,n)=>(t.push(n),t);case Object(o.isObject)(t):return(t,n)=>{let e=n;Object(o.isObject)(n)||(e={[Object.keys(t).reduce((t,n)=>Math.max(t,n),-1)+1]:n});const r=Object.keys(e)[0];return t[r]=e[r],t};case Object(o.isFunction)(t):return(n,e)=>t(n,e);default:return null}}function s(t){switch(!0){case Object(r.isImplemented)(t,"final"):return t[r.protocols.final];case Object(o.isString)(t):case Object(o.isArray)(t):case Object(o.isObject)(t):case Object(o.isFunction)(t):return t=>t;default:return null}}function l(t){return Object.freeze({[r.protocols.init]:u(t),[r.protocols.step]:i(t),[r.protocols.final]:s(t)})}const f=l([]),d=l({}),a=l("");function p(t,n){return{[r.protocols.init]:()=>n[r.protocols.init](),[r.protocols.step]:t,[r.protocols.final]:t=>n[r.protocols.final](t)}}function b(t,n){const e=t("function"==typeof n?l(n):n);return e[r.protocols.step].bind(e)}function j(t){return{[r.protocols.completed]:!0,[r.protocols.value]:t}}function O(t){return null==t?void 0:t[r.protocols.value]}function m(t){return!!(null==t?void 0:t[r.protocols.completed])}function y(t){return m(t)?t:j(t)}function v(t){return m(t)?O(t):t}function S(t,n,e){if(null==t)return null;const o=Object(c.iterator)(t);if(!o)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=e,i=o.next();for(;!i.done;){if(u=n[r.protocols.step](u,i.value),m(u)){u=O(u);break}i=o.next()}return n[r.protocols.final](u)}},"./src/modules/utils.js":
/*!******************************!*\
        !*** ./src/modules/utils.js ***!
        \******************************/
/*! exports provided: isFunction, isGeneratorFunction, isObject, isNumber, isString, isArray */
function(t,n,e){"use strict";e.r(n),e.d(n,"isFunction",(function(){return o})),e.d(n,"isGeneratorFunction",(function(){return c})),e.d(n,"isObject",(function(){return u})),e.d(n,"isNumber",(function(){return i})),e.d(n,"isString",(function(){return s})),e.d(n,"isArray",(function(){return l}));const r=Object.prototype.toString;function o(t){return"[object Function]"===r.call(t)}function c(t){return"[object GeneratorFunction]"===r.call(t)}function u(t){if("[object Object]"!==r.call(t))return!1;const n=Object.getPrototypeOf(t);if(null===n)return!0;const e=Object.prototype.hasOwnProperty.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e===Object}function i(t){return"[object Number]"===r.call(t)&&isFinite(t)}function s(t){return"[object String]"===r.call(t)}const l=Array.isArray}})},t.exports=r()},function(t,n,e){"use strict";e.r(n),e.d(n,"kv",(function(){return i})),e.d(n,"key",(function(){return s})),e.d(n,"value",(function(){return l})),e.d(n,"complement",(function(){return f})),e.d(n,"transduce",(function(){return d})),e.d(n,"sequence",(function(){return O})),e.d(n,"into",(function(){return m})),e.d(n,"asArray",(function(){return a})),e.d(n,"asObject",(function(){return p})),e.d(n,"asString",(function(){return b})),e.d(n,"asIterator",(function(){return j})),e.d(n,"compose",(function(){return y})),e.d(n,"toReducer",(function(){return v})),e.d(n,"toFunction",(function(){return S})),e.d(n,"identity",(function(){return h})),e.d(n,"flatten",(function(){return g})),e.d(n,"repeat",(function(){return F})),e.d(n,"chunk",(function(){return T})),e.d(n,"chunkBy",(function(){return C})),e.d(n,"distinct",(function(){return w})),e.d(n,"distinctBy",(function(){return k})),e.d(n,"distinctWith",(function(){return _})),e.d(n,"drop",(function(){return A})),e.d(n,"dropWhile",(function(){return R})),e.d(n,"filter",(function(){return E})),e.d(n,"reject",(function(){return N})),e.d(n,"map",(function(){return P})),e.d(n,"flatMap",(function(){return M})),e.d(n,"take",(function(){return U})),e.d(n,"takeWhile",(function(){return G})),e.d(n,"takeNth",(function(){return q})),e.d(n,"unique",(function(){return $})),e.d(n,"uniqueBy",(function(){return W})),e.d(n,"uniqueWith",(function(){return B}));var r=e(0);function o(t,n){return t===n||isNaN(t)&&isNaN(n)}function c(t,n){return Object(r.isNumber)(t)?[null,t]:[t,n]}function u(t,n){return Object(r.isFunction)(t)?[null,t]:[t,n]}function i(t){const n=Object.keys(t)[0];return{k:n,v:t[n]}}function s(t){return i(t).k}function l(t){return i(t).v}function f(t){return(...n)=>!t(...n)}function d(t,n,e,o){const c=Object(r.isFunction)(e)?v(e):e,u=null!=o?o:c[r.protocols.init](),i=n?n(c):c;return Object(r.reduce)(t,i,u)}function a(t,n){return d(t,n,v([]))}function p(t,n){return d(t,n,v({}))}function b(t,n){return d(t,n,v(""))}function j(t,n){return n?function(t,n){const e={[r.protocols.step]:(t,n)=>(t.items.unshift(n),t),[r.protocols.final]:t=>t},o=Object(r.iterator)(t),c=n(e);let u=!1;const i=[];function s(){const t=i.length;for(;i.length===t;){const t=o.next();if(t.done||u){c[r.protocols.final](l);break}u=Object(r.isCompleted)(c[r.protocols.step](l,t.value))}}const l={items:i,next:function(){return 0===i.length&&s(),0===i.length?{done:!0}:{value:i.pop(),done:!1}},step:s};return l}(t,n):Object(r.iterator)(t)}function O(t,n){switch(!0){case Object(r.isArray)(t):return a(t,n);case Object(r.isObject)(t):return p(t,n);case Object(r.isString)(t):return b(t,n);case Object(r.isImplemented)(t,"step"):return d(t,n,t);case Object(r.isImplemented)(t,"iterator"):return j(t,n);default:throw Error(`Cannot sequence collection: ${t}`)}}function m(t,n,e){switch(!0){case Object(r.isArray)(t):return d(n,e,v([]),t);case Object(r.isObject)(t):return d(n,e,v({}),t);case Object(r.isString)(t):return d(n,e,v(""),t);case Object(r.isImplemented)(t,"step"):return d(n,e,t,t);default:throw Error(`Cannot reduce collection into ${t}: ${n}`)}}function y(...t){const n=t.reverse();return t=>n.reduce((t,n)=>n(t),t)}const v=r.toReducer,S=r.toFunction;function h(t){return t?O(t,h()):t=>Object(r.toTransducer)((n,e)=>t[r.protocols.step](n,e),t)}function g(t){return t?O(t,g()):t=>Object(r.toTransducer)((n,e)=>{const o=Object(r.toTransducer)((n,e)=>{const o=t[r.protocols.step](n,e);return Object(r.isCompleted)(o)?Object(r.complete)(o):o},t);return Object(r.isIterable)(e)?Object(r.reduce)(e,o,n):o[r.protocols.step](n,e)},t)}function F(t,n){const[e,o]=c(t,n);return e?O(e,F(o)):t=>Object(r.toTransducer)((n,e)=>{let c=n;for(let n=0;n<o&&(c=t[r.protocols.step](c,e),!Object(r.isCompleted)(c));n++);return c},t)}const x=Symbol("NO_VALUE");function T(t,n){const[e,o]=c(t,n);return e?O(e,T(o)):t=>{let n=0,e=[];return{[r.protocols.init]:()=>t[r.protocols.init](),[r.protocols.step](c,u){if(e[n++]=u,n===o){const u=e.slice(0,o);return e=[],n=0,t[r.protocols.step](c,u)}return c},[r.protocols.final]:o=>n>0?Object(r.ensureUncompleted)(t[r.protocols.step](o,e.slice(0,n))):t[r.protocols.final](o)}}}function C(t,n){const[e,c]=u(t,n);return e?O(e,C(c)):t=>{let n=[],e=x;return{[r.protocols.init]:()=>t[r.protocols.init](),[r.protocols.step](u,i){const s=c(i);let l=u;return e===x||o(s,e)?n.push(i):(l=t[r.protocols.step](l,n),n=[i]),e=s,l},[r.protocols.final](e){const o=n.length;return o>0?Object(r.ensureUncompleted)(t[r.protocols.step](e,n.slice(0,o))):t[r.protocols.final](e)}}}}const I=Symbol("NO_VALUE");function _(t,n){const[e,o]=u(t,n);return e?O(e,_(o)):t=>{let n=I;return Object(r.toTransducer)((e,c)=>n!==I&&o(c,n)?e:(n=c,t[r.protocols.step](e,c)),t)}}function k(t,n){const[e,r]=u(t,n);return _(e,(t,n)=>o(r(t),r(n)))}function w(t){return _(t,o)}function A(t,n){const[e,o]=c(t,n);return e?O(e,A(o)):t=>{let n=0;return Object(r.toTransducer)((e,c)=>n++<o?e:t[r.protocols.step](e,c),t)}}function R(t,n){const[e,o]=u(t,n);return e?O(e,R(o)):t=>{let n=!0;return Object(r.toTransducer)((e,c)=>{if(n){if(o(c))return e;n=!1}return t[r.protocols.step](e,c)},t)}}function E(t,n){const[e,o]=u(t,n);return e?O(e,E(o)):t=>Object(r.toTransducer)((n,e)=>o(e)?t[r.protocols.step](n,e):n,t)}function N(t,n){const[e,r]=u(t,n);return E(e,f(r))}function P(t,n){const[e,o]=u(t,n);return e?O(e,P(o)):t=>Object(r.toTransducer)((n,e)=>t[r.protocols.step](n,o(e)),t)}function M(t,n){const[e,r]=u(t,n);return e?O(e,y(P(r),g())):y(P(r),g())}function U(t,n){const[e,o]=c(t,n);return e?O(e,U(o)):t=>{let n=0;return Object(r.toTransducer)((e,c)=>{let u=e;return n<o&&(u=t[r.protocols.step](e,c),n===o-1&&(u=Object(r.ensureCompleted)(u))),n++,u},t)}}function G(t,n){const[e,o]=u(t,n);return e?O(e,G(o)):t=>Object(r.toTransducer)((n,e)=>o(e)?t[r.protocols.step](n,e):Object(r.ensureCompleted)(n),t)}function q(t,n){const[e,o]=c(t,n);return e?O(e,q(o)):t=>{let n=-1;return Object(r.toTransducer)((e,c)=>++n%o==0?t[r.protocols.step](e,c):e,t)}}function B(t,n){const[e,o]=u(t,n);return e?O(e,B(o)):t=>{const n=[];return Object(r.toTransducer)((e,c)=>n.some(t=>o(c,t))?e:(n.push(c),t[r.protocols.step](e,c)),t)}}function W(t,n){const[e,r]=u(t,n);return B(e,(t,n)=>o(r(t),r(n)))}function $(t){return B(t,o)}}])}));