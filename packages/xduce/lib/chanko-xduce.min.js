/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xduce=e():t.xduce=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/index.js")}({"./src/index.js":
/*!**********************!*\
        !*** ./src/index.js ***!
        \**********************/
/*! exports provided: protocols, isImplemented, iterator, isIterable, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce, toFunction, toReducer, toTransducer, isArray, isFunction, isGeneratorFunction, isNumber, isObject, isString */
function(t,e,n){"use strict";n.r(e);var r=n(
/*! modules/protocol */
"./src/modules/protocol.js");n.d(e,"protocols",(function(){return r.protocols})),n.d(e,"isImplemented",(function(){return r.isImplemented}));var o=n(
/*! modules/iteration */
"./src/modules/iteration.js");n.d(e,"iterator",(function(){return o.iterator})),n.d(e,"isIterable",(function(){return o.isIterable}));var c=n(
/*! modules/reduction */
"./src/modules/reduction.js");n.d(e,"complete",(function(){return c.complete})),n.d(e,"uncomplete",(function(){return c.uncomplete})),n.d(e,"isCompleted",(function(){return c.isCompleted})),n.d(e,"ensureCompleted",(function(){return c.ensureCompleted})),n.d(e,"ensureUncompleted",(function(){return c.ensureUncompleted})),n.d(e,"reduce",(function(){return c.reduce})),n.d(e,"toFunction",(function(){return c.toFunction})),n.d(e,"toReducer",(function(){return c.toReducer})),n.d(e,"toTransducer",(function(){return c.toTransducer}));var u=n(
/*! modules/utils */
"./src/modules/utils.js");n.d(e,"isArray",(function(){return u.isArray})),n.d(e,"isFunction",(function(){return u.isFunction})),n.d(e,"isGeneratorFunction",(function(){return u.isGeneratorFunction})),n.d(e,"isNumber",(function(){return u.isNumber})),n.d(e,"isObject",(function(){return u.isObject})),n.d(e,"isString",(function(){return u.isString}))},"./src/modules/iteration.js":
/*!**********************************!*\
        !*** ./src/modules/iteration.js ***!
        \**********************************/
/*! exports provided: iterator, isIterable */
function(t,e,n){"use strict";n.r(e),n.d(e,"iterator",(function(){return c})),n.d(e,"isIterable",(function(){return u}));var r=n(
/*! modules/protocol */
"./src/modules/protocol.js"),o=n(
/*! modules/utils */
"./src/modules/utils.js");function c(t){switch(!0){case Object(o.isFunction)(t[Symbol.iterator]):case Object(o.isGeneratorFunction)(t[Symbol.iterator]):return t[Symbol.iterator]();case Object(o.isFunction)(t):return n=t,function*(){let t,e=0;for(;t=n(e++,t),void 0!==t;)yield t}();case Object(o.isObject)(t):return e=t,function*(){const t=Object.keys(e);let n=0;for(;n<t.length;){const r=t[n++];yield{[r]:e[r]}}}();default:return null}var e,n}function u(t){return Object(r.isImplemented)(t,"iterator")||Object(o.isObject)(t)}},"./src/modules/protocol.js":
/*!*********************************!*\
        !*** ./src/modules/protocol.js ***!
        \*********************************/
/*! exports provided: protocols, isImplemented */
function(t,e,n){"use strict";n.r(e),n.d(e,"protocols",(function(){return o})),n.d(e,"isImplemented",(function(){return c}));var r=n(
/*! modules/utils */
"./src/modules/utils.js");const o=Object.create(null,{init:{value:Symbol.for("reducer/init")},step:{value:Symbol.for("reducer/step")},final:{value:Symbol.for("reducer/final")},completed:{value:Symbol.for("reducer/completed")},value:{value:Symbol.for("reducer/value")}});function c(t,e){if(null==t)return!1;switch(e){case"iterator":return Object(r.isFunction)(t[Symbol.iterator])||Object(r.isGeneratorFunction)(t[Symbol.iterator]);case"asyncIterator":return Object(r.isGeneratorFunction)(t[Symbol.asyncIterator]);case"completed":case"value":return Object.getOwnPropertySymbols(t).includes(o[e]);default:return Object(r.isFunction)(t[o[e]])}}},"./src/modules/reduction.js":
/*!**********************************!*\
        !*** ./src/modules/reduction.js ***!
        \**********************************/
/*! exports provided: init, step, final, toReducer, ARRAY_REDUCER, OBJECT_REDUCER, STRING_REDUCER, toTransducer, toFunction, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce */
function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return u})),n.d(e,"step",(function(){return i})),n.d(e,"final",(function(){return s})),n.d(e,"toReducer",(function(){return l})),n.d(e,"ARRAY_REDUCER",(function(){return f})),n.d(e,"OBJECT_REDUCER",(function(){return d})),n.d(e,"STRING_REDUCER",(function(){return a})),n.d(e,"toTransducer",(function(){return p})),n.d(e,"toFunction",(function(){return b})),n.d(e,"complete",(function(){return j})),n.d(e,"uncomplete",(function(){return O})),n.d(e,"isCompleted",(function(){return m})),n.d(e,"ensureCompleted",(function(){return y})),n.d(e,"ensureUncompleted",(function(){return v})),n.d(e,"reduce",(function(){return S}));var r=n(
/*! modules/protocol */
"./src/modules/protocol.js"),o=n(
/*! modules/utils */
"./src/modules/utils.js"),c=n(
/*! modules/iteration */
"./src/modules/iteration.js");function u(t){switch(!0){case Object(r.isImplemented)(t,"init"):return t[r.protocols.init];case Object(o.isString)(t):return()=>"";case Object(o.isArray)(t):return()=>[];case Object(o.isObject)(t):return()=>({});case Object(o.isFunction)(t):return()=>{throw Error("init not available")};default:return null}}function i(t){switch(!0){case Object(r.isImplemented)(t,"step"):return t[r.protocols.step];case Object(o.isString)(t):return(t,e)=>t+(Object(o.isObject)(e)?e[Object.keys(e)[0]]:e);case Object(o.isArray)(t):return(t,e)=>(t.push(e),t);case Object(o.isObject)(t):return(t,e)=>{let n=e;Object(o.isObject)(e)||(n={[Object.keys(t).reduce((t,e)=>Math.max(t,e),-1)+1]:e});const r=Object.keys(n)[0];return t[r]=n[r],t};case Object(o.isFunction)(t):return(e,n)=>t(e,n);default:return null}}function s(t){switch(!0){case Object(r.isImplemented)(t,"final"):return t[r.protocols.final];case Object(o.isString)(t):case Object(o.isArray)(t):case Object(o.isObject)(t):case Object(o.isFunction)(t):return t=>t;default:return null}}function l(t){return Object.freeze({[r.protocols.init]:u(t),[r.protocols.step]:i(t),[r.protocols.final]:s(t)})}const f=l([]),d=l({}),a=l("");function p(t,e){return{[r.protocols.init]:()=>e[r.protocols.init](),[r.protocols.step]:t,[r.protocols.final]:t=>e[r.protocols.final](t)}}function b(t,e){const n=t("function"==typeof e?l(e):e);return n[r.protocols.step].bind(n)}function j(t){return{[r.protocols.completed]:!0,[r.protocols.value]:t}}function O(t){return null==t?void 0:t[r.protocols.value]}function m(t){return!!(null==t?void 0:t[r.protocols.completed])}function y(t){return m(t)?t:j(t)}function v(t){return m(t)?O(t):t}function S(t,e,n){if(null==t)return null;const o=Object(c.iterator)(t);if(!o)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=n,i=o.next();for(;!i.done;){if(u=e[r.protocols.step](u,i.value),m(u)){u=O(u);break}i=o.next()}return e[r.protocols.final](u)}},"./src/modules/utils.js":
/*!******************************!*\
        !*** ./src/modules/utils.js ***!
        \******************************/
/*! exports provided: isFunction, isGeneratorFunction, isObject, isNumber, isString, isArray */
function(t,e,n){"use strict";n.r(e),n.d(e,"isFunction",(function(){return o})),n.d(e,"isGeneratorFunction",(function(){return c})),n.d(e,"isObject",(function(){return u})),n.d(e,"isNumber",(function(){return i})),n.d(e,"isString",(function(){return s})),n.d(e,"isArray",(function(){return l}));const r=Object.prototype.toString;function o(t){return"[object Function]"===r.call(t)}function c(t){return"[object GeneratorFunction]"===r.call(t)}function u(t){if("[object Object]"!==r.call(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n===Object}function i(t){return"[object Number]"===r.call(t)&&isFinite(t)}function s(t){return"[object String]"===r.call(t)}const l=Array.isArray}})},t.exports=r()},function(t,e,n){"use strict";n.r(e),n.d(e,"kv",(function(){return i})),n.d(e,"key",(function(){return s})),n.d(e,"value",(function(){return l})),n.d(e,"complement",(function(){return f})),n.d(e,"transduce",(function(){return d})),n.d(e,"sequence",(function(){return O})),n.d(e,"into",(function(){return m})),n.d(e,"asArray",(function(){return a})),n.d(e,"asObject",(function(){return p})),n.d(e,"asString",(function(){return b})),n.d(e,"asIterator",(function(){return j})),n.d(e,"compose",(function(){return y})),n.d(e,"toReducer",(function(){return r.toReducer})),n.d(e,"toFunction",(function(){return r.toFunction})),n.d(e,"identity",(function(){return v})),n.d(e,"flatten",(function(){return S})),n.d(e,"repeat",(function(){return h})),n.d(e,"chunk",(function(){return F})),n.d(e,"chunkBy",(function(){return x})),n.d(e,"distinct",(function(){return I})),n.d(e,"distinctBy",(function(){return C})),n.d(e,"distinctWith",(function(){return R})),n.d(e,"drop",(function(){return _})),n.d(e,"dropWhile",(function(){return k})),n.d(e,"filter",(function(){return w})),n.d(e,"reject",(function(){return A})),n.d(e,"map",(function(){return E})),n.d(e,"flatMap",(function(){return N})),n.d(e,"take",(function(){return P})),n.d(e,"takeWhile",(function(){return M})),n.d(e,"takeNth",(function(){return U})),n.d(e,"unique",(function(){return B})),n.d(e,"uniqueBy",(function(){return q})),n.d(e,"uniqueWith",(function(){return G}));var r=n(0);function o(t,e){return t===e||isNaN(t)&&isNaN(e)}function c(t,e){return Object(r.isNumber)(t)?[null,t]:[t,e]}function u(t,e){return Object(r.isFunction)(t)?[null,t]:[t,e]}function i(t){const e=Object.keys(t)[0];return{k:e,v:t[e]}}function s(t){return i(t).k}function l(t){return i(t).v}function f(t){return(...e)=>!t(...e)}function d(t,e,n,o){const c=Object(r.isFunction)(n)?Object(r.toReducer)(n):n,u=null!=o?o:c[r.protocols.init](),i=e?e(c):c;return Object(r.reduce)(t,i,u)}function a(t,e){return d(t,e,Object(r.toReducer)([]))}function p(t,e){return d(t,e,Object(r.toReducer)({}))}function b(t,e){return d(t,e,Object(r.toReducer)(""))}function j(t,e){return e?function(t,e){const n={[r.protocols.step]:(t,e)=>(t.items.unshift(e),t),[r.protocols.final]:t=>t},o=Object(r.iterator)(t),c=e(n);let u=!1;const i=[];function s(){const t=i.length;for(;i.length===t;){const t=o.next();if(t.done||u){c[r.protocols.final](l);break}u=Object(r.isCompleted)(c[r.protocols.step](l,t.value))}}const l={items:i,next:function(){return 0===i.length&&s(),0===i.length?{done:!0}:{value:i.pop(),done:!1}},step:s};return l}(t,e):Object(r.iterator)(t)}function O(t,e){switch(!0){case Object(r.isArray)(t):return a(t,e);case Object(r.isObject)(t):return p(t,e);case Object(r.isString)(t):return b(t,e);case Object(r.isImplemented)(t,"step"):return d(t,e,t);case Object(r.isImplemented)(t,"iterator"):return j(t,e);default:throw Error(`Cannot sequence collection: ${t}`)}}function m(t,e,n){switch(!0){case Object(r.isArray)(t):return d(e,n,Object(r.toReducer)([]),t);case Object(r.isObject)(t):return d(e,n,Object(r.toReducer)({}),t);case Object(r.isString)(t):return d(e,n,Object(r.toReducer)(""),t);case Object(r.isImplemented)(t,"step"):return d(e,n,t,t);default:throw Error(`Cannot reduce collection into ${t}: ${e}`)}}function y(...t){const e=t.reverse();return t=>e.reduce((t,e)=>e(t),t)}function v(t){return t?O(t,v()):t=>Object(r.toTransducer)((e,n)=>t[r.protocols.step](e,n),t)}function S(t){return t?O(t,S()):t=>Object(r.toTransducer)((e,n)=>{const o=Object(r.toTransducer)((e,n)=>{const o=t[r.protocols.step](e,n);return Object(r.isCompleted)(o)?Object(r.complete)(o):o},t);return Object(r.isIterable)(n)?Object(r.reduce)(n,o,e):o[r.protocols.step](e,n)},t)}function h(t,e){const[n,o]=c(t,e);return n?O(n,h(o)):t=>Object(r.toTransducer)((e,n)=>{let c=e;for(let e=0;e<o&&(c=t[r.protocols.step](c,n),!Object(r.isCompleted)(c));e++);return c},t)}const g=Symbol("NO_VALUE");function F(t,e){const[n,o]=c(t,e);return n?O(n,F(o)):t=>{let e=0,n=[];return{[r.protocols.init]:()=>t[r.protocols.init](),[r.protocols.step](c,u){if(n[e++]=u,e===o){const u=n.slice(0,o);return n=[],e=0,t[r.protocols.step](c,u)}return c},[r.protocols.final]:o=>e>0?Object(r.ensureUncompleted)(t[r.protocols.step](o,n.slice(0,e))):t[r.protocols.final](o)}}}function x(t,e){const[n,c]=u(t,e);return n?O(n,x(c)):t=>{let e=[],n=g;return{[r.protocols.init]:()=>t[r.protocols.init](),[r.protocols.step](u,i){const s=c(i);let l=u;return n===g||o(s,n)?e.push(i):(l=t[r.protocols.step](l,e),e=[i]),n=s,l},[r.protocols.final](n){const o=e.length;return o>0?Object(r.ensureUncompleted)(t[r.protocols.step](n,e.slice(0,o))):t[r.protocols.final](n)}}}}const T=Symbol("NO_VALUE");function R(t,e){const[n,o]=u(t,e);return n?O(n,R(o)):t=>{let e=T;return Object(r.toTransducer)((n,c)=>e!==T&&o(c,e)?n:(e=c,t[r.protocols.step](n,c)),t)}}function C(t,e){const[n,r]=u(t,e);return R(n,(t,e)=>o(r(t),r(e)))}function I(t){return R(t,o)}function _(t,e){const[n,o]=c(t,e);return n?O(n,_(o)):t=>{let e=0;return Object(r.toTransducer)((n,c)=>e++<o?n:t[r.protocols.step](n,c),t)}}function k(t,e){const[n,o]=u(t,e);return n?O(n,k(o)):t=>{let e=!0;return Object(r.toTransducer)((n,c)=>{if(e){if(o(c))return n;e=!1}return t[r.protocols.step](n,c)},t)}}function w(t,e){const[n,o]=u(t,e);return n?O(n,w(o)):t=>Object(r.toTransducer)((e,n)=>o(n)?t[r.protocols.step](e,n):e,t)}function A(t,e){const[n,r]=u(t,e);return w(n,f(r))}function E(t,e){const[n,o]=u(t,e);return n?O(n,E(o)):t=>Object(r.toTransducer)((e,n)=>t[r.protocols.step](e,o(n)),t)}function N(t,e){const[n,r]=u(t,e);return n?O(n,y(E(r),S())):y(E(r),S())}function P(t,e){const[n,o]=c(t,e);return n?O(n,P(o)):t=>{let e=0;return Object(r.toTransducer)((n,c)=>{let u=n;return e<o&&(u=t[r.protocols.step](n,c),e===o-1&&(u=Object(r.ensureCompleted)(u))),e++,u},t)}}function M(t,e){const[n,o]=u(t,e);return n?O(n,M(o)):t=>Object(r.toTransducer)((e,n)=>o(n)?t[r.protocols.step](e,n):Object(r.ensureCompleted)(e),t)}function U(t,e){const[n,o]=c(t,e);return n?O(n,U(o)):t=>{let e=-1;return Object(r.toTransducer)((n,c)=>++e%o==0?t[r.protocols.step](n,c):n,t)}}function G(t,e){const[n,o]=u(t,e);return n?O(n,G(o)):t=>{const e=[];return Object(r.toTransducer)((n,c)=>e.some(t=>o(c,t))?n:(e.push(c),t[r.protocols.step](n,c)),t)}}function q(t,e){const[n,r]=u(t,e);return G(n,(t,e)=>o(r(t),r(e)))}function B(t){return G(t,o)}}])}));