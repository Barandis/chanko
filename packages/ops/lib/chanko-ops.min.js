/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ops=t():e.ops=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"../../node_modules/@babel/runtime/helpers/AsyncGenerator.js":
/*!********************************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/@babel/runtime/helpers/AsyncGenerator.js ***!
  \********************************************************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./AwaitValue */"../../node_modules/@babel/runtime/helpers/AwaitValue.js");function o(e){var t,n;function o(t,n){try{var c=e[t](n),i=c.value,s=i instanceof r;Promise.resolve(s?i.wrapped:i).then((function(e){s?o("return"===t?"return":"next",e):u(c.done?"return":"normal",e)}),(function(e){o("throw",e)}))}catch(e){u("throw",e)}}function u(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?o(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(u,c){var i={key:e,arg:r,resolve:u,reject:c,next:null};n?n=n.next=i:(t=n=i,o(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},e.exports=o},"../../node_modules/@babel/runtime/helpers/AwaitValue.js":
/*!****************************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/@babel/runtime/helpers/AwaitValue.js ***!
  \****************************************************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){this.wrapped=e}},"../../node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js":
/*!*************************************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js ***!
  \*************************************************************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./AwaitValue */"../../node_modules/@babel/runtime/helpers/AwaitValue.js");e.exports=function(e){return new r(e)}},"../../node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js":
/*!************************************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js ***!
  \************************************************************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./AsyncGenerator */"../../node_modules/@babel/runtime/helpers/AsyncGenerator.js");e.exports=function(e){return function(){return new r(e.apply(this,arguments))}}},"../../node_modules/process/browser.js":
/*!**********************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/process/browser.js ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t){var n,r,o=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:u}catch(e){n=u}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(e){r=c}}();var s,l=[],a=!1,f=-1;function d(){a&&s&&(a=!1,s.length?l=s.concat(l):f=-1,l.length&&b())}function b(){if(!a){var e=i(d);a=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,a=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function j(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||a||i(b)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=j,o.addListener=j,o.once=j,o.off=j,o.removeListener=j,o.removeAllListeners=j,o.emit=j,o.prependListener=j,o.prependOnceListener=j,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"../../node_modules/setimmediate/setImmediate.js":
/*!********************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/setimmediate/setImmediate.js ***!
  \********************************************************************************************/
/*! no static exports found */function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,u,c,i,s=1,l={},a=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){m(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(c="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(c)&&m(+t.data.slice(c.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),r=function(t){e.postMessage(c+t,"*")}):e.MessageChannel?((u=new MessageChannel).port1.onmessage=function(e){m(e.data)},r=function(e){u.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(m,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return l[s]=o,r(s),s++},d.clearImmediate=b}function b(e){delete l[e]}function m(e){if(a)setTimeout(m,0,e);else{var t=l[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{b(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(/*! ./../webpack/buildin/global.js */"../../node_modules/webpack/buildin/global.js"),n(/*! ./../process/browser.js */"../../node_modules/process/browser.js"))},"../../node_modules/timers-browserify/main.js":
/*!*****************************************************************************************!*\
  !*** /home/barandis/Development/projects/chanko/node_modules/timers-browserify/main.js ***!
  \*****************************************************************************************/
/*! no static exports found */function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function u(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new u(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new u(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(/*! setimmediate */"../../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(/*! ./../webpack/buildin/global.js */"../../node_modules/webpack/buildin/global.js"))},"../../node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"../core/lib/chanko-core.js":
/*!**********************************!*\
  !*** ../core/lib/chanko-core.js ***!
  \**********************************/
/*! no static exports found */function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./src/index.js":
/*!**********************!*\
        !*** ./src/index.js ***!
        \**********************/
/*! exports provided: protocols, iterator, isIterable, kv, key, value, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce, toFunction, toReducer, toTransducer, isArray, isFunction, isGeneratorFunction, isNumber, isObject, isString */function(e,t,n){"use strict";n.r(t);var r=n(/*! modules/protocol */"./src/modules/protocol.js");n.d(t,"protocols",(function(){return r.protocols}));var o=n(/*! modules/iteration */"./src/modules/iteration.js");n.d(t,"iterator",(function(){return o.iterator})),n.d(t,"isIterable",(function(){return o.isIterable})),n.d(t,"kv",(function(){return o.kv})),n.d(t,"key",(function(){return o.key})),n.d(t,"value",(function(){return o.value}));var u=n(/*! modules/reduction */"./src/modules/reduction.js");n.d(t,"complete",(function(){return u.complete})),n.d(t,"uncomplete",(function(){return u.uncomplete})),n.d(t,"isCompleted",(function(){return u.isCompleted})),n.d(t,"ensureCompleted",(function(){return u.ensureCompleted})),n.d(t,"ensureUncompleted",(function(){return u.ensureUncompleted})),n.d(t,"reduce",(function(){return u.reduce})),n.d(t,"toFunction",(function(){return u.toFunction})),n.d(t,"toReducer",(function(){return u.toReducer})),n.d(t,"toTransducer",(function(){return u.toTransducer}));var c=n(/*! modules/utils */"./src/modules/utils.js");n.d(t,"isArray",(function(){return c.isArray})),n.d(t,"isFunction",(function(){return c.isFunction})),n.d(t,"isGeneratorFunction",(function(){return c.isGeneratorFunction})),n.d(t,"isNumber",(function(){return c.isNumber})),n.d(t,"isObject",(function(){return c.isObject})),n.d(t,"isString",(function(){return c.isString}))},"./src/modules/iteration.js":
/*!**********************************!*\
        !*** ./src/modules/iteration.js ***!
        \**********************************/
/*! exports provided: iterator, isIterable, kv, key, value */function(e,t,n){"use strict";n.r(t),n.d(t,"iterator",(function(){return s})),n.d(t,"isIterable",(function(){return l})),n.d(t,"kv",(function(){return u})),n.d(t,"key",(function(){return c})),n.d(t,"value",(function(){return i}));var r=n(/*! modules/protocol */"./src/modules/protocol.js"),o=n(/*! modules/utils */"./src/modules/utils.js");function u(e){const t=Object.keys(e)[0];return{k:t,v:e[t]}}function c(e){return u(e).k}function i(e){return u(e).v}function s(e,t=null){switch(!0){case Object(o.isFunction)(e[Symbol.iterator]):case Object(o.isGeneratorFunction)(e[Symbol.iterator]):return e[Symbol.iterator]();case Object(o.isFunction)(e):return n=e,function*(){let e,t=0;for(;e=n(t++,e),void 0!==e;)yield e}();case Object(o.isObject)(e):return function(e,t){return function*(){const n="function"==typeof t?Object.keys(e).sort(t):Object.keys(e);let r=0;for(;r<n.length;){const t=n[r++];yield{[t]:e[t]}}}()}(e,t);default:return null}var n}function l(e){return Object(r.isImplemented)(e,"iterator")||Object(o.isObject)(e)}},"./src/modules/protocol.js":
/*!*********************************!*\
        !*** ./src/modules/protocol.js ***!
        \*********************************/
/*! exports provided: protocols, isImplemented */function(e,t,n){"use strict";n.r(t),n.d(t,"protocols",(function(){return o})),n.d(t,"isImplemented",(function(){return u}));var r=n(/*! modules/utils */"./src/modules/utils.js");const o=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function u(e,t){if(null==e)return!1;switch(t){case"iterator":return Object(r.isFunction)(e[Symbol.iterator])||Object(r.isGeneratorFunction)(e[Symbol.iterator]);case"asyncIterator":return Object(r.isGeneratorFunction)(e[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(e).includes(o[t]);default:return Object(r.isFunction)(e[o[t]])}}},"./src/modules/reduction.js":
/*!**********************************!*\
        !*** ./src/modules/reduction.js ***!
        \**********************************/
/*! exports provided: init, step, result, toReducer, ARRAY_REDUCER, OBJECT_REDUCER, STRING_REDUCER, toTransducer, toFunction, complete, uncomplete, isCompleted, ensureCompleted, ensureUncompleted, reduce */function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return c})),n.d(t,"step",(function(){return i})),n.d(t,"result",(function(){return s})),n.d(t,"toReducer",(function(){return l})),n.d(t,"ARRAY_REDUCER",(function(){return a})),n.d(t,"OBJECT_REDUCER",(function(){return f})),n.d(t,"STRING_REDUCER",(function(){return d})),n.d(t,"toTransducer",(function(){return b})),n.d(t,"toFunction",(function(){return m})),n.d(t,"complete",(function(){return j})),n.d(t,"uncomplete",(function(){return p})),n.d(t,"isCompleted",(function(){return O})),n.d(t,"ensureCompleted",(function(){return h})),n.d(t,"ensureUncompleted",(function(){return v})),n.d(t,"reduce",(function(){return y}));var r=n(/*! modules/protocol */"./src/modules/protocol.js"),o=n(/*! modules/utils */"./src/modules/utils.js"),u=n(/*! modules/iteration */"./src/modules/iteration.js");function c(e){switch(!0){case Object(r.isImplemented)(e,"init"):return e[r.protocols.init];case Object(o.isString)(e):return()=>"";case Object(o.isArray)(e):return()=>[];case Object(o.isObject)(e):return()=>({});case Object(o.isFunction)(e):return()=>{throw Error("init not available")};default:return null}}function i(e){switch(!0){case Object(r.isImplemented)(e,"step"):return e[r.protocols.step];case Object(o.isString)(e):return(e,t)=>e+(Object(o.isObject)(t)?Object(u.kv)(t).v:t);case Object(o.isArray)(e):return(e,t)=>(e.push(t),e);case Object(o.isObject)(e):return(e,t)=>{let n=t;Object(o.isObject)(t)||(n={[Object.keys(e).reduce((e,t)=>Math.max(e,t),-1)+1]:t});const{k:r,v:c}=Object(u.kv)(n);return e[r]=c,e};case Object(o.isFunction)(e):return(t,n)=>e(t,n);default:return null}}function s(e){switch(!0){case Object(r.isImplemented)(e,"result"):return e[r.protocols.result];case Object(o.isString)(e):case Object(o.isArray)(e):case Object(o.isObject)(e):case Object(o.isFunction)(e):return e=>e;default:return null}}function l(e){return Object.freeze({[r.protocols.init]:c(e),[r.protocols.step]:i(e),[r.protocols.result]:s(e)})}const a=l([]),f=l({}),d=l("");function b(e,t){return{[r.protocols.init]:()=>t[r.protocols.init](),[r.protocols.step]:e,[r.protocols.result]:e=>t[r.protocols.result](e)}}function m(e,t){const n=e("function"==typeof t?l(t):t);return n[r.protocols.step].bind(n)}function j(e){return{[r.protocols.reduced]:!0,[r.protocols.value]:e}}function p(e){return null==e?void 0:e[r.protocols.value]}function O(e){return!!(null==e?void 0:e[r.protocols.reduced])}function h(e){return O(e)?e:j(e)}function v(e){return O(e)?p(e):e}function y(e,t,n){if(null==e)return null;const o=Object(u.iterator)(e);if(!o)throw Error(`Cannot reduce an instance of ${e.constructor.name}`);let c=n,i=o.next();for(;!i.done;){if(c=t[r.protocols.step](c,i.value),O(c)){c=p(c);break}i=o.next()}return t[r.protocols.result](c)}},"./src/modules/utils.js":
/*!******************************!*\
        !*** ./src/modules/utils.js ***!
        \******************************/
/*! exports provided: isFunction, isGeneratorFunction, isObject, isNumber, isString, isArray */function(e,t,n){"use strict";n.r(t),n.d(t,"isFunction",(function(){return o})),n.d(t,"isGeneratorFunction",(function(){return u})),n.d(t,"isObject",(function(){return c})),n.d(t,"isNumber",(function(){return i})),n.d(t,"isString",(function(){return s})),n.d(t,"isArray",(function(){return l}));const r=Object.prototype.toString;function o(e){return"[object Function]"===r.call(e)}function u(e){return"[object GeneratorFunction]"===r.call(e)}function c(e){if("[object Object]"!==r.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n===Object}function i(e){return"[object Number]"===r.call(e)&&isFinite(e)}function s(e){return"[object String]"===r.call(e)}const l=Array.isArray}})},e.exports=r()},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: fixed, dropping, sliding, CLOSED, chan, timedChan, transChan, send, recv, sendAsync, recvAsync, recvOrThrow, close, isClosed, isBuffered, isTimed, select, selectAsync, value, channel, config, SET_IMMEDIATE, MESSAGE_CHANNEL, SET_TIMEOUT, go, sleep, join, EMPTY */function(e,t,n){"use strict";n.r(t);var r=n(/*! modules/buffer */"./src/modules/buffer.js");n.d(t,"fixed",(function(){return r.fixed})),n.d(t,"dropping",(function(){return r.dropping})),n.d(t,"sliding",(function(){return r.sliding}));var o=n(/*! modules/channel */"./src/modules/channel/index.js");n.d(t,"CLOSED",(function(){return o.CLOSED})),n.d(t,"chan",(function(){return o.chan})),n.d(t,"timedChan",(function(){return o.timedChan})),n.d(t,"transChan",(function(){return o.transChan})),n.d(t,"send",(function(){return o.send})),n.d(t,"recv",(function(){return o.recv})),n.d(t,"sendAsync",(function(){return o.sendAsync})),n.d(t,"recvAsync",(function(){return o.recvAsync})),n.d(t,"recvOrThrow",(function(){return o.recvOrThrow})),n.d(t,"close",(function(){return o.close})),n.d(t,"isClosed",(function(){return o.isClosed})),n.d(t,"isBuffered",(function(){return o.isBuffered})),n.d(t,"isTimed",(function(){return o.isTimed})),n.d(t,"select",(function(){return o.select})),n.d(t,"selectAsync",(function(){return o.selectAsync})),n.d(t,"value",(function(){return o.value})),n.d(t,"channel",(function(){return o.channel}));var u=n(/*! modules/dispatcher */"./src/modules/dispatcher.js");n.d(t,"config",(function(){return u.config})),n.d(t,"SET_IMMEDIATE",(function(){return u.SET_IMMEDIATE})),n.d(t,"MESSAGE_CHANNEL",(function(){return u.MESSAGE_CHANNEL})),n.d(t,"SET_TIMEOUT",(function(){return u.SET_TIMEOUT}));var c=n(/*! modules/process */"./src/modules/process.js");n.d(t,"go",(function(){return c.go})),n.d(t,"sleep",(function(){return c.sleep})),n.d(t,"join",(function(){return c.join}));var i=n(/*! modules/queue */"./src/modules/queue.js");n.d(t,"EMPTY",(function(){return i.EMPTY}))},"./src/modules/buffer.js":
/*!*******************************!*\
  !*** ./src/modules/buffer.js ***!
  \*******************************/
/*! exports provided: isBuffer, fixed, dropping, sliding, queue, size, count, isFull, add, remove */function(e,t,n){"use strict";n.r(t),n.d(t,"isBuffer",(function(){return s})),n.d(t,"fixed",(function(){return l})),n.d(t,"dropping",(function(){return a})),n.d(t,"sliding",(function(){return f})),n.d(t,"queue",(function(){return d})),n.d(t,"size",(function(){return b})),n.d(t,"count",(function(){return m})),n.d(t,"isFull",(function(){return j})),n.d(t,"add",(function(){return p})),n.d(t,"remove",(function(){return O}));var r=n(/*! modules/queue */"./src/modules/queue.js");const o=Symbol("BUFFER"),u=Symbol("FIXED"),c=Symbol("DROPPING"),i=Symbol("SLIDING");function s(e){return!!(null==e?void 0:e[o])}function l(e){return Object.create(null,{queue:{value:Object(r.queue)()},size:{value:e},[o]:{value:u}})}function a(e){return Object.create(null,{queue:{value:Object(r.queue)()},size:{value:e},[o]:{value:c}})}function f(e){return Object.create(null,{queue:{value:Object(r.queue)()},size:{value:e},[o]:{value:i}})}function d(e){return e.queue}function b(e){return e.size}function m(e){return Object(r.count)(e.queue)}function j(e){return e[o]===u&&Object(r.count)(e.queue)>=e.size}function p(e,...t){switch(e[o]){case u:for(const n of t)Object(r.enqueue)(e.queue,n);break;case c:for(const n of t)m(e)<b(e)&&Object(r.enqueue)(e.queue,n);break;case i:for(const n of t)m(e)>=b(e)&&Object(r.dequeue)(e.queue),Object(r.enqueue)(e.queue,n);break;default:return}}function O(e){return Object(r.dequeue)(e.queue)}},"./src/modules/channel/handler.js":
/*!****************************************!*\
  !*** ./src/modules/channel/handler.js ***!
  \****************************************/
/*! exports provided: CLOSED, MAX_DIRTY, MAX_QUEUED, channel, handleSend, handleRecv, close, box, isBox */function(e,t,n){"use strict";n.r(t),n.d(t,"CLOSED",(function(){return l})),n.d(t,"MAX_DIRTY",(function(){return i})),n.d(t,"MAX_QUEUED",(function(){return s})),n.d(t,"channel",(function(){return m})),n.d(t,"handleSend",(function(){return j})),n.d(t,"handleRecv",(function(){return p})),n.d(t,"close",(function(){return O})),n.d(t,"box",(function(){return b})),n.d(t,"isBox",(function(){return f}));var r=n(/*! @chanko/core */"../core/lib/chanko-core.js"),o=n(/*! modules/queue */"./src/modules/queue.js"),u=n(/*! modules/buffer */"./src/modules/buffer.js"),c=n(/*! modules/dispatcher */"./src/modules/dispatcher.js");const i=64,s=1024,l=Symbol("CLOSED"),a=Symbol("BOX");function f(e){return!!(null==e?void 0:e[a])}function d(e){return!!(null==e?void 0:e[r.protocols.reduced])}function b(e){return Object.create(null,{value:{value:e,writable:!0},[a]:{value:!0}})}function m(e,t,n=!1,r=i,u=s){return Object.create(null,{buffer:{value:e},xform:{value:t},maxDirty:{value:r},maxQueued:{value:u},recvs:{value:Object(o.queue)()},sends:{value:Object(o.queue)()},dirtyRecvs:{value:0,writable:!0},dirtySends:{value:0,writable:!0},closed:{value:!1,writable:!0},isBuffered:{value:!!e},isTimed:{value:n}})}function j(e,t,n){if(t===l)throw Error("Cannot send CLOSED to a channel");if(e.closed)return n.commit(),b(!1);let i,s;if(e.buffer&&!Object(u.isFull)(e.buffer)){n.commit();const l=d(e.xform[r.protocols.step](e.buffer,t));for(;0!==Object(u.count)(e.buffer)&&(i=Object(o.dequeue)(e.recvs),i!==o.EMPTY);)if(i.active){s=i.commit();const t=Object(u.remove)(e.buffer);s&&Object(c.dispatch)(()=>s(t))}return l&&O(e),b(!0)}for(;i=Object(o.dequeue)(e.recvs),i!==o.EMPTY;)if(i.active)return n.commit(),s=i.commit(),s&&Object(c.dispatch)(()=>s(t)),b(!0);if(e.dirtySends>e.maxDirty?(Object(o.filter)(e.sends,e=>e.handler.active),e.dirtySends=0):e.dirtySends++,Object(o.count)(e.sends)>=e.maxQueued)throw Error(`No more than ${e.maxQueued} pending sends are allowed on a single channel`);return Object(o.enqueue)(e.sends,function(e,t){return Object.create(null,{value:{value:e,writable:!0},handler:{value:t},[a]:{value:!0}})}(t,n)),null}function p(e,t){let n,i,s;if(e.buffer&&Object(u.count)(e.buffer)>0){t.commit();const l=Object(u.remove)(e.buffer);for(;!Object(u.isFull)(e.buffer)&&(n=Object(o.dequeue)(e.sends),n!==o.EMPTY);)i=n.handler,i.active&&(s=i.commit(),s&&Object(c.dispatch)(()=>s(!0)),d(e.xform[r.protocols.step](e.buffer,n.value))&&O(e));return b(l)}for(;n=Object(o.dequeue)(e.sends),n!==o.EMPTY;)if(i=n.handler,i.active)return s=i.commit(),s&&Object(c.dispatch)(()=>s(!0)),b(n.value);if(e.closed)return t.commit(),b(l);if(e.dirtyRecvs>e.maxDirty?(Object(o.filter)(e.recvs,e=>e.active),e.dirtyRecvs=0):e.dirtyRecvs++,Object(o.count)(e.recvs)>=e.maxQueued){const t=e.maxQueued;throw Error(`No more than ${t} pending receives are allowed on a single channel`)}return Object(o.enqueue)(e.recvs,t),null}function O(e){if(e.closed)return;let t,n,i;if(e.closed=!0,e.buffer)for(e.xform[r.protocols.result](e.buffer);0!==Object(u.count)(e.buffer)&&(t=Object(o.dequeue)(e.recvs),t!==o.EMPTY);)if(t.active){i=t.commit();const n=Object(u.remove)(e.buffer);i&&Object(c.dispatch)(()=>i(n))}for(;t=Object(o.dequeue)(e.recvs),t!==o.EMPTY;)t.active&&(i=t.commit(),i&&Object(c.dispatch)(()=>i(l)));for(;n=Object(o.dequeue)(e.sends),n!==o.EMPTY;)n.handler.active&&(i=n.handler.commit(),i&&Object(c.dispatch)(()=>i(!1)))}},"./src/modules/channel/index.js":
/*!**************************************!*\
  !*** ./src/modules/channel/index.js ***!
  \**************************************/
/*! exports provided: CLOSED, DEFAULT, chan, timedChan, transChan, isClosed, isBuffered, isTimed, sendAsync, recvAsync, selectAsync, send, recv, recvOrThrow, select, close, value, channel */function(e,t,n){"use strict";n.r(t),n.d(t,"chan",(function(){return p})),n.d(t,"timedChan",(function(){return O})),n.d(t,"transChan",(function(){return h})),n.d(t,"isClosed",(function(){return v})),n.d(t,"isBuffered",(function(){return y})),n.d(t,"isTimed",(function(){return g})),n.d(t,"sendAsync",(function(){return w})),n.d(t,"recvAsync",(function(){return S})),n.d(t,"send",(function(){return E})),n.d(t,"recv",(function(){return T})),n.d(t,"recvOrThrow",(function(){return x})),n.d(t,"close",(function(){return _}));var r=n(/*! @babel/runtime/helpers/awaitAsyncGenerator */"../../node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js"),o=n.n(r),u=n(/*! @babel/runtime/helpers/wrapAsyncGenerator */"../../node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js"),c=n.n(u),i=n(/*! ./handler */"./src/modules/channel/handler.js");n.d(t,"CLOSED",(function(){return i.CLOSED}));var s=n(/*! ./select */"./src/modules/channel/select.js");n.d(t,"DEFAULT",(function(){return s.DEFAULT})),n.d(t,"selectAsync",(function(){return s.selectAsync})),n.d(t,"select",(function(){return s.select})),n.d(t,"value",(function(){return s.value})),n.d(t,"channel",(function(){return s.channel}));var l=n(/*! modules/buffer */"./src/modules/buffer.js"),a=n(/*! @chanko/core */"../core/lib/chanko-core.js");const f=()=>i.CLOSED;function d(e){return Object.create(null,{active:{value:!0},commit:{value:()=>e}})}function b(e,t,n){const r=t(n);return r!==i.CLOSED&&Object(l.add)(e,r),e}function m(e,t=f){return{[a.protocols.step](n,r){try{return e[a.protocols.step](n,r)}catch(e){return b(n,t,e)}},[a.protocols.result](n){try{return e[a.protocols.result](n)}catch(e){return b(n,t,e)}}}}const j={[a.protocols.init](){throw Error("init not available")},[a.protocols.step]:(e,t)=>(Object(l.add)(e,t),e),[a.protocols.result]:e=>e};function p(e,t){const n={maxDirty:i.MAX_DIRTY,maxQueued:i.MAX_QUEUED},{buf:r,transducer:u,handler:s,maxDirty:a,maxQueued:f,timer:d}=function(e,t,n){let r,o;e?"number"==typeof e?(r=Object(l.fixed)(e),o=t):Object(l.isBuffer)(e)?(r=e,o=t):(r=(null==e?void 0:e.transducer)?Object(l.fixed)(1):null,o=e):(r=null,o=t);const{transducer:u,handler:c,maxDirty:i,maxQueued:s,timer:a}=Object.assign({},n,o);return{buf:r,transducer:u,handler:c,maxDirty:i,maxQueued:s,timer:a}}(e,t,n);if(u&&!r)throw Error("Only buffered channels can use transducers");const b=m(u?u(j):j,s),p="number"==typeof d,O=Object(i.channel)(r,b,p,a,f);function h(){return(h=c()((function*(){for(;;){const e=yield o()(T(O));if(e===i.CLOSED)break;yield e}}))).apply(this,arguments)}return O[Symbol.asyncIterator]=function(){return h.apply(this,arguments)},p&&setTimeout(()=>Object(i.close)(O),d),O}function O(e=0){return p({timer:e})}function h(e,t){return p({transducer:e,handler:t})}function v(e){return e.closed}function y(e){return e.isBuffered}function g(e){return e.isTimed}function w(e,t,n=(()=>{})){const r=Object(i.handleSend)(e,t,d(n));r&&n&&n(r.value)}function S(e,t=(()=>{})){const n=Object(i.handleRecv)(e,d(t));n&&t&&t(n.value)}function E(e,t){return new Promise(n=>{w(e,t,n)})}function T(e){return new Promise(t=>{S(e,t)})}function x(e){return new Promise((t,n)=>{S(e,e=>{Object.prototype.isPrototypeOf.call(Error.prototype,e)?n(e):t(e)})})}function _(e){Object(i.close)(e)}},"./src/modules/channel/select.js":
/*!***************************************!*\
  !*** ./src/modules/channel/select.js ***!
  \***************************************/
/*! exports provided: DEFAULT, select, selectAsync, value, channel */function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT",(function(){return o})),n.d(t,"select",(function(){return i})),n.d(t,"selectAsync",(function(){return c})),n.d(t,"value",(function(){return s})),n.d(t,"channel",(function(){return l}));var r=n(/*! ./handler */"./src/modules/channel/handler.js");const o=Symbol("DEFAULT");function u(e,t){return Object.assign(Object.create(null),{value:e,channel:t})}function c(e,t=(()=>{}),n={}){const c=e.length;if(0===c)throw Error("select called with no operations");const i=!!n.priority,s=i?[]:function(e){const t=[];for(let n=0;n<e;n++)t.push(n);for(let n=e-1;n>0;n--){const e=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[e],t[e]=r}return t}(c),l=Object(r.box)(!0);function a(e){return function(e,t){return Object.create(null,{active:{get:()=>e.value},commit:{value:()=>(e.value=!1,t)}})}(l,n=>{t(u(n,e))})}let f;for(let n=0;n<c;n++){const o=e[i?n:s[n]];let c,l;if(Array.isArray(o)?([c,l]=o,f=Object(r.handleSend)(c,l,a(c))):(c=o,f=Object(r.handleRecv)(c,a(c))),Object(r.isBox)(f)){t(u(f.value,c));break}}!Object(r.isBox)(f)&&Object.prototype.hasOwnProperty.call(n,"default")&&l.value&&(l.value=!1,t(u(n.default,o)))}function i(e,t={}){return new Promise(n=>{c(e,n,t)})}function s(e){return e.value}function l(e){return e.channel}},"./src/modules/dispatcher.js":
/*!***********************************!*\
  !*** ./src/modules/dispatcher.js ***!
  \***********************************/
/*! exports provided: SET_IMMEDIATE, MESSAGE_CHANNEL, SET_TIMEOUT, config, dispatch */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"SET_IMMEDIATE",(function(){return u})),n.d(t,"MESSAGE_CHANNEL",(function(){return c})),n.d(t,"SET_TIMEOUT",(function(){return i})),n.d(t,"config",(function(){return m})),n.d(t,"dispatch",(function(){return j}));var r=n(/*! modules/queue */"./src/modules/queue.js");const o=Object(r.queue)(),u=Symbol("SET_IMMEDIATE"),c=Symbol("MESSAGE_CHANNEL"),i=Symbol("SET_TIMEOUT"),s={batchSize:1024,dispatchMethod:u};let l=d(),a=!1,f=!0;function d(){switch(function(){switch(s.dispatchMethod){case c:return"undefined"!=typeof MessageChannel?c:i;case i:return i;default:return void 0!==e?u:"undefined"!=typeof MessageChannel?c:i}}()){case u:return()=>{f&&a||(f=!0,e(b))};case c:{const e=new MessageChannel;return e.port1.onmessage=()=>b(),()=>{f&&a||(f=!0,e.port2.postMessage(0))}}case i:return()=>{f&&a||(f=!0,setTimeout(b,0))}}}function b(){a=!0,f=!1;let e=0;for(;;){const t=Object(r.dequeue)(o);if(t===r.EMPTY)break;if(t(),e>=s.batchSize)break;e++,a=!1,Object(r.count)(o)&&l()}}function m(e={}){for(const t in s)t in e&&(s[t]=e[t],"dispatchMethod"===t&&(l=d()));return Object.assign({},s)}function j(e){Object(r.enqueue)(o,e),l()}}.call(this,n(/*! ./../../../../node_modules/timers-browserify/main.js */"../../node_modules/timers-browserify/main.js").setImmediate)},"./src/modules/process.js":
/*!********************************!*\
  !*** ./src/modules/process.js ***!
  \********************************/
/*! exports provided: sleep, go, join */function(e,t,n){"use strict";n.r(t),n.d(t,"sleep",(function(){return o})),n.d(t,"go",(function(){return u})),n.d(t,"join",(function(){return c}));var r=n(/*! modules/channel */"./src/modules/channel/index.js");function o(e=0){return new Promise(t=>{const n=Object(r.timedChan)(e);Object(r.recvAsync)(n,t)})}function u(e,...t){return e(...t)}function c(...e){return Promise.all(e)}},"./src/modules/queue.js":
/*!******************************!*\
  !*** ./src/modules/queue.js ***!
  \******************************/
/*! exports provided: EMPTY, queue, isQueue, count, isEmpty, enqueue, dequeue, peek, filter */function(e,t,n){"use strict";n.r(t),n.d(t,"EMPTY",(function(){return r})),n.d(t,"queue",(function(){return c})),n.d(t,"isQueue",(function(){return u})),n.d(t,"count",(function(){return i})),n.d(t,"isEmpty",(function(){return s})),n.d(t,"enqueue",(function(){return l})),n.d(t,"dequeue",(function(){return a})),n.d(t,"peek",(function(){return f})),n.d(t,"filter",(function(){return d}));const r=Symbol("EMPTY"),o=Symbol("QUEUE");function u(e){return!!(null==e?void 0:e[o])}function c(){return Object.create(null,{store:{value:[],writable:!0},pointer:{value:0,writable:!0},[o]:{value:!0}})}function i(e){return e.store.length-e.pointer}function s(e){return 0===e.store.length}function l(e,t){e.store.push(t)}function a(e){if(0===e.store.length)return r;const t=e.store[e.pointer];return 2*++e.pointer>=e.store.length&&(e.store=e.store.slice(e.pointer),e.pointer=0),t}function f(e){return 0===e.store.length?r:e.store[e.pointer]}function d(e,t){for(let n=0,r=i(e);n<r;n++){const n=a(e);t(n)&&l(e,n)}}}})},e.exports=r()},function(e,t){e.exports=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}},function(e,t,n){"use strict";n.r(t),n.d(t,"map",(function(){return b})),n.d(t,"merge",(function(){return s})),n.d(t,"partition",(function(){return i})),n.d(t,"pipe",(function(){return c})),n.d(t,"split",(function(){return l})),n.d(t,"tap",(function(){return a})),n.d(t,"untap",(function(){return f})),n.d(t,"untapAll",(function(){return d})),n.d(t,"reduce",(function(){return p})),n.d(t,"toChannel",(function(){return O})),n.d(t,"toArray",(function(){return h})),n.d(t,"debounce",(function(){return v})),n.d(t,"throttle",(function(){return y}));var r=n(0);function o(e){return"[object Number]"===Object.prototype.toString.call(e)&&isFinite(e)}const u=Symbol("multitap/taps");function c(e,t,n=!1){return Object(r.go)(async()=>{for(;;){const o=await Object(r.recv)(e);if(o===r.CLOSED){n||Object(r.close)(t);break}if(!await Object(r.send)(t,o))break}}),t}function i(e,t,n=0,o=0){const u=Object(r.chan)(n),c=Object(r.chan)(o);return Object(r.go)(async()=>{for(;;){const n=await Object(r.recv)(t);if(n===r.CLOSED){Object(r.close)(u),Object(r.close)(c);break}await Object(r.send)(e(n)?u:c,n)}}),[u,c]}function s(e,t=0){const n=Object(r.chan)(t),o=e.slice();return Object(r.go)(async()=>{for(;0!==o.length;){const{value:e,channel:t}=await Object(r.select)(o);e!==r.CLOSED?await Object(r.send)(n,e):o.splice(o.indexOf(t),1)}Object(r.close)(n)}),n}function l(e,...t){let n=0===t.length?[2]:t;if(1===n.length&&o(n[0])){const e=n[0];n=[];for(let t=0;t<e;t++)n.push(0)}const u=n.map(e=>Object(r.chan)(e)),c=Object(r.chan)();let i=0;function s(){0==--i&&Object(r.sendAsync)(c)}return Object(r.go)(async()=>{for(;;){const t=await Object(r.recv)(e);if(t===r.CLOSED){for(const e of u)Object(r.close)(e);break}i=u.length;for(const e of u)Object(r.sendAsync)(e,t,s);await Object(r.recv)(c)}}),u}function a(e,t=Object(r.chan)()){return e[u]||function(e){Object.defineProperty(e,u,{configurable:!0,writable:!0,value:[]});const t=Object(r.chan)();let n=0;function o(){0==--n&&Object(r.sendAsync)(t)}Object(r.go)(async()=>{for(;;){const c=await Object(r.recv)(e);if(c===r.CLOSED||0===e[u].length){delete e[u];break}n=e[u].length;for(const t of e[u])Object(r.sendAsync)(t,c,o);await Object(r.recv)(t)}})}(e),e[u].includes(t)||e[u].push(t),t}function f(e,t){const n=e[u];if(n){const o=n.indexOf(t);-1!==o&&(n.splice(o,1),0===n.length&&Object(r.sendAsync)(e))}}function d(e){e[u]&&(e[u]=[],Object(r.sendAsync)(e))}function b(e,t,n=0){const o=Object(r.chan)(n),u=t.length,c=[],i=[],s=Object(r.chan)();let l;for(let e=0;e<u;e++)i[e]=(e=>t=>{c[e]=t,0==--l&&Object(r.sendAsync)(s,c.slice())})(e);return Object(r.go)(async()=>{for(;;){l=u;for(let e=0;e<u;e++)Object(r.recvAsync)(t[e],i[e]);const n=await Object(r.recv)(s);for(const e of n)if(e===r.CLOSED){Object(r.close)(o);for(const e of t)Object(r.close)(e);return}await Object(r.send)(o,e(...n))}}),o}var m=n(1),j=n.n(m);function p(e,t,n){const o=Object(r.chan)();return Object(r.go)(async()=>{let u=n;var c,i=!0,s=!1;try{for(var l,a,f=j()(t);i=(l=await f.next()).done,a=await l.value,!i;i=!0){u=e(u,a)}}catch(e){s=!0,c=e}finally{try{i||null==f.return||await f.return()}finally{if(s)throw c}}Object(r.sendAsync)(o,u,()=>Object(r.close)(o))}),o}function O(e,t=Object(r.chan)(e.length)){return Object(r.go)(async()=>{for(const n of e)await Object(r.send)(t,n);Object(r.close)(t)}),t}function h(e,t=[]){return p((e,t)=>(e.push(t),e),e,t)}function v(e,t,n,u){const c={leading:!1,trailing:!0,maxDelay:0,cancel:Object(r.chan)()},[i,s,l]=o(n)?[t,n,Object.assign(c,null!=u?u:{})]:[0,t,Object.assign(c,null!=n?n:{})],a=Object(r.chan)(i),{leading:f,trailing:d,maxDelay:b,cancel:m}=l;return Object(r.go)(async()=>{let t=Object(r.chan)(),n=Object(r.chan)(),o=r.CLOSED;for(;;){const{value:u,channel:c}=await Object(r.select)([e,t,n,m]);if(c===m){Object(r.close)(a);break}if(c===e){if(u===r.CLOSED){Object(r.close)(a);break}const e=Object(r.isTimed)(t);t=Object(r.timedChan)(s),!e&&b>0&&(n=Object(r.timedChan)(b)),f?e?o=u:await Object(r.send)(a,u):d&&(o=u)}else t=Object(r.chan)(),n=Object(r.chan)(),d&&o!==r.CLOSED&&(await Object(r.send)(a,o),r.CLOSED)}}),a}function y(e,t,n,u){const c={leading:!0,trailing:!0,cancel:Object(r.chan)()},[i,s,l]=o(n)?[t,n,Object.assign(c,null!=u?u:{})]:[0,t,Object.assign(c,null!=n?n:{})],a=Object(r.chan)(i),{leading:f,trailing:d,cancel:b}=l;return Object(r.go)(async()=>{let t=Object(r.chan)(),n=r.CLOSED;for(;;){const{value:o,channel:u}=await Object(r.select)([e,t,b]);if(u===b){Object(r.close)(a);break}if(u===e){if(o===r.CLOSED){Object(r.close)(a);break}const e=Object(r.isTimed)(t);e||(t=Object(r.timedChan)(s)),f?e?d&&(n=o):await Object(r.send)(a,o):d&&(n=o)}else d&&n!==r.CLOSED?(t=Object(r.timedChan)(s),await Object(r.send)(a,n),n=r.CLOSED):t=Object(r.chan)()}}),a}}])}));