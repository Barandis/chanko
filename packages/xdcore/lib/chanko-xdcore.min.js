/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xdcore=t():e.xdcore=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"protocols",(function(){return s})),r.d(t,"isImplemented",(function(){return a})),r.d(t,"iterator",(function(){return d})),r.d(t,"isIterable",(function(){return p})),r.d(t,"complete",(function(){return S})),r.d(t,"uncomplete",(function(){return x})),r.d(t,"isCompleted",(function(){return h})),r.d(t,"ensureCompleted",(function(){return g})),r.d(t,"ensureUncompleted",(function(){return w})),r.d(t,"reduce",(function(){return P})),r.d(t,"toFunction",(function(){return O})),r.d(t,"toReducer",(function(){return j})),r.d(t,"toTransducer",(function(){return v})),r.d(t,"isArray",(function(){return f})),r.d(t,"isFunction",(function(){return u})),r.d(t,"isGeneratorFunction",(function(){return o})),r.d(t,"isNumber",(function(){return i})),r.d(t,"isObject",(function(){return c})),r.d(t,"isString",(function(){return l}));const n=Object.prototype.toString;function u(e){return"[object Function]"===n.call(e)}function o(e){return"[object GeneratorFunction]"===n.call(e)}function c(e){if("[object Object]"!==n.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r===Object}function i(e){return"[object Number]"===n.call(e)&&isFinite(e)}function l(e){return"[object String]"===n.call(e)}const f=Array.isArray,s=Object.create(null,{init:{value:Symbol.for("reducer/init")},step:{value:Symbol.for("reducer/step")},result:{value:Symbol.for("reducer/result")},completed:{value:Symbol.for("reducer/completed")},value:{value:Symbol.for("reducer/value")}});function a(e,t){if(null==e)return!1;switch(t){case"iterator":return u(e[Symbol.iterator])||o(e[Symbol.iterator]);case"asyncIterator":return o(e[Symbol.asyncIterator]);case"completed":case"value":return Object.getOwnPropertySymbols(e).includes(s[t]);default:return u(e[s[t]])}}function d(e){switch(!0){case u(e[Symbol.iterator]):case o(e[Symbol.iterator]):return e[Symbol.iterator]();case u(e):return r=e,function*(){let e,t=0;for(;e=r(t++,e),void 0!==e;)yield e}();case c(e):return t=e,function*(){const e=Object.keys(t);let r=0;for(;r<e.length;){const n=e[r++];yield{[n]:t[n]}}}();default:return null}var t,r}function p(e){return a(e,"iterator")||c(e)}function b(e){switch(!0){case a(e,"init"):return e[s.init];case l(e):return()=>"";case f(e):return()=>[];case c(e):return()=>({});case u(e):return()=>{throw Error("init not available")};default:return null}}function y(e){switch(!0){case a(e,"step"):return e[s.step];case l(e):return(e,t)=>e+(c(t)?t[Object.keys(t)[0]]:t);case f(e):return(e,t)=>(e.push(t),e);case c(e):return(e,t)=>{let r=t;if(!c(t)){r={[Object.keys(e).reduce((e,t)=>Math.max(e,t),-1)+1]:t}}const n=Object.keys(r)[0];return e[n]=r[n],e};case u(e):return(t,r)=>e(t,r);default:return null}}function m(e){switch(!0){case a(e,"result"):return e[s.result];case l(e):case f(e):case c(e):case u(e):return e=>e;default:return null}}function j(e){return Object.freeze({[s.init]:b(e),[s.step]:y(e),[s.result]:m(e)})}j([]),j({}),j("");function v(e,t){return{[s.init]:()=>t[s.init](),[s.step]:e,[s.result]:e=>t[s.result](e)}}function O(e,t){const r=e("function"==typeof t?j(t):t);return r[s.step].bind(r)}function S(e){return{[s.completed]:!0,[s.value]:e}}function x(e){return null==e?void 0:e[s.value]}function h(e){return!!(null==e?void 0:e[s.completed])}function g(e){return h(e)?e:S(e)}function w(e){return h(e)?x(e):e}function P(e,t,r){if(null==e)return null;const n=d(e);if(!n)throw Error(`Cannot reduce an instance of ${e.constructor.name}`);let u=r,o=n.next();for(;!o.done;){if(u=t[s.step](u,o.value),h(u)){u=x(u);break}o=n.next()}return t[s.result](u)}}])}));