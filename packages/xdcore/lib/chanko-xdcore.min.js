/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xdcore=e():t.xdcore=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)r.d(n,u,function(e){return t[e]}.bind(null,u));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e),r.d(e,"protocols",(function(){return f})),r.d(e,"isImplemented",(function(){return a})),r.d(e,"iterator",(function(){return d})),r.d(e,"isIterable",(function(){return b})),r.d(e,"complete",(function(){return S})),r.d(e,"uncomplete",(function(){return x})),r.d(e,"isCompleted",(function(){return h})),r.d(e,"ensureCompleted",(function(){return g})),r.d(e,"ensureUncompleted",(function(){return w})),r.d(e,"reduce",(function(){return P})),r.d(e,"toFunction",(function(){return O})),r.d(e,"toReducer",(function(){return j})),r.d(e,"toTransducer",(function(){return v})),r.d(e,"isArray",(function(){return s})),r.d(e,"isFunction",(function(){return u})),r.d(e,"isGeneratorFunction",(function(){return o})),r.d(e,"isNumber",(function(){return i})),r.d(e,"isObject",(function(){return c})),r.d(e,"isString",(function(){return l}));const n=Object.prototype.toString;function u(t){return"[object Function]"===n.call(t)}function o(t){return"[object GeneratorFunction]"===n.call(t)}function c(t){if("[object Object]"!==n.call(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r===Object}function i(t){return"[object Number]"===n.call(t)&&isFinite(t)}function l(t){return"[object String]"===n.call(t)}const s=Array.isArray,f=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function a(t,e){if(null==t)return!1;switch(e){case"iterator":return u(t[Symbol.iterator])||o(t[Symbol.iterator]);case"asyncIterator":return o(t[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(t).includes(f[e]);default:return u(t[f[e]])}}function d(t){switch(!0){case u(t[Symbol.iterator]):case o(t[Symbol.iterator]):return t[Symbol.iterator]();case u(t):return r=t,function*(){let t,e=0;for(;t=r(e++,t),void 0!==t;)yield t}();case c(t):return e=t,function*(){const t=Object.keys(e);let r=0;for(;r<t.length;){const n=t[r++];yield{[n]:e[n]}}}();default:return null}var e,r}function b(t){return a(t,"iterator")||c(t)}function p(t){switch(!0){case a(t,"init"):return t[f.init];case l(t):return()=>"";case s(t):return()=>[];case c(t):return()=>({});case u(t):return()=>{throw Error("init not available")};default:return null}}function y(t){switch(!0){case a(t,"step"):return t[f.step];case l(t):return(t,e)=>t+(c(e)?e[Object.keys(e)[0]]:e);case s(t):return(t,e)=>(t.push(e),t);case c(t):return(t,e)=>{let r=e;if(!c(e)){r={[Object.keys(t).reduce((t,e)=>Math.max(t,e),-1)+1]:e}}const n=Object.keys(r)[0];return t[n]=r[n],t};case u(t):return(e,r)=>t(e,r);default:return null}}function m(t){switch(!0){case a(t,"result"):return t[f.result];case l(t):case s(t):case c(t):case u(t):return t=>t;default:return null}}function j(t){return Object.freeze({[f.init]:p(t),[f.step]:y(t),[f.result]:m(t)})}j([]),j({}),j("");function v(t,e){return{[f.init]:()=>e[f.init](),[f.step]:t,[f.result]:t=>e[f.result](t)}}function O(t,e){const r=t("function"==typeof e?j(e):e);return r[f.step].bind(r)}function S(t){return{[f.reduced]:!0,[f.value]:t}}function x(t){return null==t?void 0:t[f.value]}function h(t){return!!(null==t?void 0:t[f.reduced])}function g(t){return h(t)?t:S(t)}function w(t){return h(t)?x(t):t}function P(t,e,r){if(null==t)return null;const n=d(t);if(!n)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=r,o=n.next();for(;!o.done;){if(u=e[f.step](u,o.value),h(u)){u=x(u);break}o=n.next()}return e[f.result](u)}}])}));