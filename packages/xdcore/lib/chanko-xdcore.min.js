/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xdcore=t():e.xdcore=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)n.d(r,u,function(t){return e[t]}.bind(null,u));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"protocols",(function(){return a})),n.d(t,"isImplemented",(function(){return s})),n.d(t,"iterator",(function(){return d})),n.d(t,"isIterable",(function(){return p})),n.d(t,"complete",(function(){return S})),n.d(t,"uncomplete",(function(){return x})),n.d(t,"isCompleted",(function(){return h})),n.d(t,"ensureCompleted",(function(){return g})),n.d(t,"ensureUncompleted",(function(){return w})),n.d(t,"reduce",(function(){return P})),n.d(t,"toFunction",(function(){return O})),n.d(t,"toReducer",(function(){return j})),n.d(t,"toTransducer",(function(){return v})),n.d(t,"isArray",(function(){return f})),n.d(t,"isFunction",(function(){return u})),n.d(t,"isGeneratorFunction",(function(){return o})),n.d(t,"isNumber",(function(){return i})),n.d(t,"isObject",(function(){return c})),n.d(t,"isString",(function(){return l}));const r=Object.prototype.toString;function u(e){return"[object Function]"===r.call(e)}function o(e){return"[object GeneratorFunction]"===r.call(e)}function c(e){if("[object Object]"!==r.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n===Object}function i(e){return"[object Number]"===r.call(e)&&isFinite(e)}function l(e){return"[object String]"===r.call(e)}const f=Array.isArray,a=Object.create(null,{init:{value:Symbol.for("reducer/init")},step:{value:Symbol.for("reducer/step")},final:{value:Symbol.for("reducer/final")},completed:{value:Symbol.for("reducer/completed")},value:{value:Symbol.for("reducer/value")}});function s(e,t){if(null==e)return!1;switch(t){case"iterator":return u(e[Symbol.iterator])||o(e[Symbol.iterator]);case"asyncIterator":return o(e[Symbol.asyncIterator]);case"completed":case"value":return Object.getOwnPropertySymbols(e).includes(a[t]);default:return u(e[a[t]])}}function d(e){switch(!0){case u(e[Symbol.iterator]):case o(e[Symbol.iterator]):return e[Symbol.iterator]();case u(e):return n=e,function*(){let e,t=0;for(;e=n(t++,e),void 0!==e;)yield e}();case c(e):return t=e,function*(){const e=Object.keys(t);let n=0;for(;n<e.length;){const r=e[n++];yield{[r]:t[r]}}}();default:return null}var t,n}function p(e){return s(e,"iterator")||c(e)}function b(e){switch(!0){case s(e,"init"):return e[a.init];case l(e):return()=>"";case f(e):return()=>[];case c(e):return()=>({});case u(e):return()=>{throw Error("init not available")};default:return null}}function y(e){switch(!0){case s(e,"step"):return e[a.step];case l(e):return(e,t)=>e+(c(t)?t[Object.keys(t)[0]]:t);case f(e):return(e,t)=>(e.push(t),e);case c(e):return(e,t)=>{let n=t;if(!c(t)){n={[Object.keys(e).reduce((e,t)=>Math.max(e,t),-1)+1]:t}}const r=Object.keys(n)[0];return e[r]=n[r],e};case u(e):return(t,n)=>e(t,n);default:return null}}function m(e){switch(!0){case s(e,"final"):return e[a.final];case l(e):case f(e):case c(e):case u(e):return e=>e;default:return null}}function j(e){return Object.freeze({[a.init]:b(e),[a.step]:y(e),[a.final]:m(e)})}j([]),j({}),j("");function v(e,t){return{[a.init]:()=>t[a.init](),[a.step]:e,[a.final]:e=>t[a.final](e)}}function O(e,t){const n=e("function"==typeof t?j(t):t);return n[a.step].bind(n)}function S(e){return{[a.completed]:!0,[a.value]:e}}function x(e){return null==e?void 0:e[a.value]}function h(e){return!!(null==e?void 0:e[a.completed])}function g(e){return h(e)?e:S(e)}function w(e){return h(e)?x(e):e}function P(e,t,n){if(null==e)return null;const r=d(e);if(!r)throw Error(`Cannot reduce an instance of ${e.constructor.name}`);let u=n,o=r.next();for(;!o.done;){if(u=t[a.step](u,o.value),h(u)){u=x(u);break}o=r.next()}return t[a.final](u)}}])}));