/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.xduceTools=n():t.xduceTools=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n),e.d(n,"protocols",(function(){return l})),e.d(n,"iterator",(function(){return y})),e.d(n,"isIterable",(function(){return m})),e.d(n,"kv",(function(){return d})),e.d(n,"key",(function(){return p})),e.d(n,"value",(function(){return b})),e.d(n,"complete",(function(){return P})),e.d(n,"uncomplete",(function(){return F})),e.d(n,"isCompleted",(function(){return _})),e.d(n,"ensureCompleted",(function(){return C})),e.d(n,"ensureUncompleted",(function(){return M})),e.d(n,"reduce",(function(){return T})),e.d(n,"toFunction",(function(){return k})),e.d(n,"toReducer",(function(){return h})),e.d(n,"toTransducer",(function(){return w})),e.d(n,"transduce",(function(){return A})),e.d(n,"sequence",(function(){return G})),e.d(n,"into",(function(){return N})),e.d(n,"asArray",(function(){return E})),e.d(n,"asObject",(function(){return I})),e.d(n,"asString",(function(){return $})),e.d(n,"asIterator",(function(){return q})),e.d(n,"compose",(function(){return z})),e.d(n,"isArray",(function(){return f})),e.d(n,"isFunction",(function(){return u})),e.d(n,"isGeneratorFunction",(function(){return o})),e.d(n,"isNumber",(function(){return i})),e.d(n,"isObject",(function(){return c})),e.d(n,"isString",(function(){return s}));const r=Object.prototype.toString;function u(t){return"[object Function]"===r.call(t)}function o(t){return"[object GeneratorFunction]"===r.call(t)}function c(t){if("[object Object]"!==r.call(t))return!1;const n=Object.getPrototypeOf(t);if(null===n)return!0;const e=Object.prototype.hasOwnProperty.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e===Object}function i(t){return"[object Number]"===r.call(t)&&isFinite(t)}function s(t){return"[object String]"===r.call(t)}const f=Array.isArray,l=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function a(t,n){if(null==t)return!1;switch(n){case"iterator":return u(t[Symbol.iterator])||o(t[Symbol.iterator]);case"asyncIterator":return o(t[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(t).includes(l[n]);default:return u(t[l[n]])}}function d(t){const n=Object.keys(t)[0];return{k:n,v:t[n]}}function p(t){return d(t).k}function b(t){return d(t).v}function y(t,n=null){switch(!0){case u(t[Symbol.iterator]):case o(t[Symbol.iterator]):return t[Symbol.iterator]();case u(t):return e=t,function*(){let t,n=0;for(;t=e(n++,t),void 0!==t;)yield t}();case c(t):return function(t,n){return function*(){const e="function"==typeof n?Object.keys(t).sort(n):Object.keys(t);let r=0;for(;r<e.length;){const n=e[r++];yield{[n]:t[n]}}}()}(t,n);default:return null}var e}function m(t){return a(t,"iterator")||c(t)}function v(t){switch(!0){case a(t,"init"):return t[l.init];case s(t):return()=>"";case f(t):return()=>[];case c(t):return()=>({});case u(t):return()=>{throw Error("init not available")};default:return null}}function j(t){switch(!0){case a(t,"step"):return t[l.step];case s(t):return(t,n)=>t+(c(n)?d(n).v:n);case f(t):return(t,n)=>(t.push(n),t);case c(t):return(t,n)=>{let e=n;if(!c(n)){e={[Object.keys(t).reduce((t,n)=>Math.max(t,n),-1)+1]:n}}const{k:r,v:u}=d(e);return t[r]=u,t};case u(t):return(n,e)=>t(n,e);default:return null}}function O(t){switch(!0){case a(t,"result"):return t[l.result];case s(t):case f(t):case c(t):case u(t):return t=>t;default:return null}}function h(t){return Object.freeze({[l.init]:v(t),[l.step]:j(t),[l.result]:O(t)})}const S=h([]),g=h({}),x=h("");function w(t,n){return{[l.init]:()=>n[l.init](),[l.step]:t,[l.result]:t=>n[l.result](t)}}function k(t,n){const e=t("function"==typeof n?h(n):n);return e[l.step].bind(e)}function P(t){return{[l.reduced]:!0,[l.value]:t}}function F(t){return null==t?void 0:t[l.value]}function _(t){return!!(null==t?void 0:t[l.reduced])}function C(t){return _(t)?t:P(t)}function M(t){return _(t)?F(t):t}function T(t,n,e){if(null==t)return null;const r=y(t);if(!r)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=e,o=r.next();for(;!o.done;){if(u=n[l.step](u,o.value),_(u)){u=F(u);break}o=r.next()}return n[l.result](u)}function A(t,n,e,r){const o=u(e)?h(e):e,c=null!=r?r:o[l.init]();return T(t,n?n(o):o,c)}function E(t,n){return A(t,n,S)}function I(t,n){return A(t,n,g)}function $(t,n){return A(t,n,x)}function q(t,n){return n?function(t,n){const e={[l.step]:(t,n)=>(t.items.unshift(n),t),[l.result]:t=>t},r=y(t),u=n(e);let o=!1;const c=[];function i(){const t=c.length;for(;c.length===t;){const t=r.next();if(t.done||o){u[l.result](s);break}o=_(u[l.step](s,t.value))}}const s={items:c,next:function(){return 0===c.length&&i(),0===c.length?{done:!0}:{value:c.pop(),done:!1}},step:i,[Symbol.iterator]:function(){return s}};return s}(t,n):y(t)}function G(t,n){switch(!0){case f(t):return E(t,n);case c(t):return I(t,n);case s(t):return $(t,n);case a(t,"step"):return A(t,n,t);case a(t,"iterator"):return q(t,n);default:throw Error(`Cannot sequence collection: ${t}`)}}function N(t,n,e){switch(!0){case f(t):return A(n,e,S,t);case c(t):return A(n,e,g,t);case s(t):return A(n,e,x,t);case a(t,"step"):return A(n,e,t,t);default:throw Error(`Cannot reduce collection into ${t}: ${n}`)}}function z(...t){const n=t.reverse();return t=>n.reduce((t,n)=>n(t),t)}}])}));