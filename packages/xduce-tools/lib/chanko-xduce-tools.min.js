/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to 
 * deal in the Software without restriction, including without limitation the 
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or 
 * sell copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tools=e():t.tools=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)n.d(r,u,function(e){return t[e]}.bind(null,u));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"protocols",(function(){return f})),n.d(e,"isImplemented",(function(){return a})),n.d(e,"iterator",(function(){return d})),n.d(e,"isIterable",(function(){return b})),n.d(e,"complete",(function(){return S})),n.d(e,"uncomplete",(function(){return h})),n.d(e,"isCompleted",(function(){return g})),n.d(e,"ensureCompleted",(function(){return x})),n.d(e,"ensureUncompleted",(function(){return w})),n.d(e,"reduce",(function(){return P})),n.d(e,"toFunction",(function(){return O})),n.d(e,"toReducer",(function(){return j})),n.d(e,"toTransducer",(function(){return v})),n.d(e,"isArray",(function(){return s})),n.d(e,"isFunction",(function(){return u})),n.d(e,"isGeneratorFunction",(function(){return o})),n.d(e,"isNumber",(function(){return i})),n.d(e,"isObject",(function(){return c})),n.d(e,"isString",(function(){return l}));const r=Object.prototype.toString;function u(t){return"[object Function]"===r.call(t)}function o(t){return"[object GeneratorFunction]"===r.call(t)}function c(t){if("[object Object]"!==r.call(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n===Object}function i(t){return"[object Number]"===r.call(t)&&isFinite(t)}function l(t){return"[object String]"===r.call(t)}const s=Array.isArray,f=Object.create(null,{init:{value:Symbol.for("transducer/init")},step:{value:Symbol.for("transducer/step")},result:{value:Symbol.for("transducer/result")},reduced:{value:Symbol.for("transducer/reduced")},value:{value:Symbol.for("transducer/value")}});function a(t,e){if(null==t)return!1;switch(e){case"iterator":return u(t[Symbol.iterator])||o(t[Symbol.iterator]);case"asyncIterator":return o(t[Symbol.asyncIterator]);case"reduced":case"value":return Object.getOwnPropertySymbols(t).includes(f[e]);default:return u(t[f[e]])}}function d(t,e=null){switch(!0){case u(t[Symbol.iterator]):case o(t[Symbol.iterator]):return t[Symbol.iterator]();case u(t):return n=t,function*(){let t,e=0;for(;t=n(e++,t),void 0!==t;)yield t}();case c(t):return function(t,e){return function*(){const n="function"==typeof e?Object.keys(t).sort(e):Object.keys(t);let r=0;for(;r<n.length;){const e=n[r++];yield{[e]:t[e]}}}()}(t,e);default:return null}var n}function b(t){return a(t,"iterator")||c(t)}function p(t){switch(!0){case a(t,"init"):return t[f.init];case l(t):return()=>"";case s(t):return()=>[];case c(t):return()=>({});case u(t):return()=>{throw Error("init not available")};default:return null}}function y(t){switch(!0){case a(t,"step"):return t[f.step];case l(t):return(t,e)=>t+(c(e)?e[Object.keys(e)[0]]:e);case s(t):return(t,e)=>(t.push(e),t);case c(t):return(t,e)=>{let n=e;if(!c(e)){n={[Object.keys(t).reduce((t,e)=>Math.max(t,e),-1)+1]:e}}const r=Object.keys(n)[0];return t[r]=n[r],t};case u(t):return(e,n)=>t(e,n);default:return null}}function m(t){switch(!0){case a(t,"result"):return t[f.result];case l(t):case s(t):case c(t):case u(t):return t=>t;default:return null}}function j(t){return Object.freeze({[f.init]:p(t),[f.step]:y(t),[f.result]:m(t)})}j([]),j({}),j("");function v(t,e){return{[f.init]:()=>e[f.init](),[f.step]:t,[f.result]:t=>e[f.result](t)}}function O(t,e){const n=t("function"==typeof e?j(e):e);return n[f.step].bind(n)}function S(t){return{[f.reduced]:!0,[f.value]:t}}function h(t){return null==t?void 0:t[f.value]}function g(t){return!!(null==t?void 0:t[f.reduced])}function x(t){return g(t)?t:S(t)}function w(t){return g(t)?h(t):t}function P(t,e,n){if(null==t)return null;const r=d(t);if(!r)throw Error(`Cannot reduce an instance of ${t.constructor.name}`);let u=n,o=r.next();for(;!o.done;){if(u=e[f.step](u,o.value),g(u)){u=h(u);break}o=r.next()}return e[f.result](u)}}])}));