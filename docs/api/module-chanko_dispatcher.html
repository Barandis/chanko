<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>chanko/dispatcher - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-chanko_buffers.html">chanko/buffers</a></li><li><a href="module-chanko_dispatcher.html">chanko/dispatcher</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-chanko_buffers-DroppingBuffer.html">DroppingBuffer</a><ul class='methods'><li data-type='method'><a href="module-chanko_buffers-DroppingBuffer.html#add">add</a></li><li data-type='method'><a href="module-chanko_buffers-DroppingBuffer.html#remove">remove</a></li></ul></li><li><a href="module-chanko_buffers-FixedBuffer.html">FixedBuffer</a><ul class='methods'><li data-type='method'><a href="module-chanko_buffers-FixedBuffer.html#add">add</a></li><li data-type='method'><a href="module-chanko_buffers-FixedBuffer.html#remove">remove</a></li></ul></li><li><a href="module-chanko_buffers-Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="module-chanko_buffers-Queue.html#dequeue">dequeue</a></li><li data-type='method'><a href="module-chanko_buffers-Queue.html#enqueue">enqueue</a></li><li data-type='method'><a href="module-chanko_buffers-Queue.html#filter">filter</a></li><li data-type='method'><a href="module-chanko_buffers-Queue.html#peek">peek</a></li></ul></li><li><a href="module-chanko_buffers-SlidingBuffer.html">SlidingBuffer</a><ul class='methods'><li data-type='method'><a href="module-chanko_buffers-SlidingBuffer.html#add">add</a></li><li data-type='method'><a href="module-chanko_buffers-SlidingBuffer.html#remove">remove</a></li></ul></li><li><a href="module-chanko_dispatcher-Dispatcher.html">Dispatcher</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">chanko/dispatcher</h1>
    

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    
        <div class="container-overview">
        
            
                <div class="description usertext"><p>This is the place where the new JS tasks are actually created. A queue is
maintained for them, and as each batch of tasks are completed, the next ones
run. As each channel call on an async function runs, it adds tasks to be run
to the queue, which are each run in their own JS task.</p>
<p>The function that spawns the new JS task depends on environment. The
<code>setImmediate</code> function is preferred as it's the fastest, not waiting for
event queues to empty before spawning the new process. However, it is not JS
standard and currently only works in IE and node.js (and little else works in
IE, so mostly this is Node-only). If <code>setImmediate</code> isn't available, an
attempt is made to use <code>MessageChannel</code>'s <code>onmessage</code> is tried next. If that
is also not available, then <code>setTimeout</code> with <code>0</code> delay is used, which is
available everywhere but which is the least performant of all of the
solutions.</p>
<p>There are other possibilities for creating processes, but they were rejected
as obsolete (<code>process.nextTick</code> and <code>onreadystatechange</code>) or unnecessary
(<code>window.postMessage</code>, which works like <code>MessageChannel</code> but doesn't work in
Web Workers).</p>
<p>It is notable and important that we act as good citizens here. This
dispatcher is capable of taking control of the JavaScript engine until
thousands, millions, or more tasks are handled. But that could cause the
system event loop to have to wait an unacceptable amount of time. So we limit
ourselves to a batch of tasks at a time, and if there are still more to be
run, we let the event loop run before that next batch is processed.</p>
<p>The dispatcher is <strong>global</strong>. There is a single instance that runs for all
channels and processes. The export is for the dispatcher object itself, not a
factory function. This is the only element of the system that works like
this.</p></div>
            

            
                




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatcher.js.html">dispatcher.js</a>, <a href="dispatcher.js.html#line8">line 8</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
































            
        
        </div>
    

    

    

    
    
    

     

    
        <h3 class="subsection-title">Namespaces</h3>

        <dl>
            <dt><a href="module-chanko_dispatcher-Dispatcher.html">Dispatcher</a></dt>
            <dd></dd>
        </dl>
    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~dispatcher"><span class="type-signature">(inner, constant) </span>dispatcher<span class="type-signature"> :<a href="module-chanko_dispatcher-Dispatcher.html">module:chanko/dispatcher~Dispatcher</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatcher.js.html">dispatcher.js</a>, <a href="dispatcher.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>The object responsible for queueing tasks to be run asynchronously by the
JavaScript engine.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="module-chanko_dispatcher-Dispatcher.html">module:chanko/dispatcher~Dispatcher</a></span>


        </li>
    </ul>






        
    

    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>